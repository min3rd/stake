"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[866],{73866:(mt,M,n)=>{n.r(M),n.d(M,{MonthlyProfitsModule:()=>g});var f=n(36895),t=n(94650),S=n(61135),y=n(18505),A=n(95698),C=n(63900),P=n(39646),I=n(80529),R=n(65240);class a{constructor(o,e){this._httpClient=o,this._apiService=e,this._monthlyProfits=new S.X(null),this._monthlyProfit=new S.X(null)}get monthlyProfits$(){return this._monthlyProfits.asObservable()}get monthlyProfit$(){return this._monthlyProfit.asObservable()}getAll(){return this._httpClient.get(this._apiService.admin_monthly_profits()).pipe((0,y.b)(o=>{this._monthlyProfits.next(o)}))}getById(o){return this._monthlyProfits.pipe((0,A.q)(1),(0,C.w)(e=>this._httpClient.get(this._apiService.admin_monthly_profits_monthly_profit(o)).pipe((0,y.b)(r=>{let l=e.findIndex(s=>s._id==r._id);return e[l]=r,this._monthlyProfit.next(r),this._monthlyProfits.next(e),(0,P.of)(r)}))))}create(){return this._monthlyProfits.pipe((0,A.q)(1),(0,C.w)(o=>this._httpClient.post(this._apiService.admin_monthly_profits(),{}).pipe((0,y.b)(e=>(o.push(e),this._monthlyProfit.next(e),this._monthlyProfits.next(o),(0,P.of)(e))))))}save(o){return this._monthlyProfits.pipe((0,A.q)(1),(0,C.w)(e=>this._httpClient.post(this._apiService.admin_monthly_profits_monthly_profit(o._id),o).pipe((0,y.b)(r=>{let l=e.findIndex(s=>s._id==r._id);return e[l]=r,this._monthlyProfit.next(r),this._monthlyProfits.next(e),(0,P.of)(r)}))))}remove(o){return this._monthlyProfits.pipe((0,A.q)(1),(0,C.w)(e=>this._httpClient.delete(this._apiService.admin_monthly_profits_monthly_profit(o._id)).pipe((0,y.b)(r=>{let l=e.findIndex(s=>s._id==r._id);return e.splice(l,1),this._monthlyProfit.next(r),this._monthlyProfits.next(e),(0,P.of)(r)}))))}}a.\u0275fac=function(o){return new(o||a)(t.LFG(I.eN),t.LFG(R.s))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"});class u{constructor(o){this._monthlyProfitsService=o}resolve(o,e){return this._monthlyProfitsService.getAll()}}u.\u0275fac=function(o){return new(o||u)(t.LFG(a))},u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});class p{constructor(o){this._monthlyProfitsService=o}resolve(o,e){return this._monthlyProfitsService.getById(o.paramMap.get("id"))}}p.\u0275fac=function(o){return new(o||p)(t.LFG(a))},p.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"});var c=n(89299),_=n(77579),J=n(82722),N=n(94880),x=n(4859),b=n(23267),L=n(63317),O=n(40758),T=n(85707);const F=["matDrawer"],j=function(i){return{"bg-card":i}},k=function(i){return["./",i]};function B(i,o){if(1&i&&(t.TgZ(0,"div",15)(1,"div",16)(2,"div")(3,"div",17)(4,"div"),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7,"-"),t.qZA(),t.TgZ(8,"div"),t._uU(9),t.qZA(),t.TgZ(10,"span"),t._uU(11,"-"),t.qZA(),t.TgZ(12,"div"),t._uU(13),t.ALo(14,"currency"),t.qZA()(),t.TgZ(15,"div",18),t._uU(16),t.ALo(17,"date"),t.qZA()()()()),2&i){const e=o.$implicit,r=t.oxw(3);t.Q6J("ngClass",t.VKq(11,j,r.selected&&r.selected._id==e._id))("routerLink",t.VKq(13,k,e._id)),t.xp6(5),t.hij(" ",e.name," "),t.xp6(4),t.hij(" (",e.username,") "),t.xp6(4),t.hij(" ",t.lcZ(14,6,e.winAmount-e.loseAmount)," "),t.xp6(3),t.hij(" ",t.xi3(17,8,e.time,"YYYY-MM-dd HH:mm:ss")," ")}}function q(i,o){if(1&i&&(t.ynx(0),t.YNc(1,B,18,15,"div",14),t.BQk()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function G(i,o){if(1&i&&(t.ynx(0),t.YNc(1,q,2,1,"ng-container",13),t.BQk()),2&i){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",e.length>0)}}class h{constructor(o,e,r,l,s){this._activatedRoute=o,this._changeDetectorRef=e,this._router=r,this._fuseMediaWatcherService=l,this._monthlyProfitsService=s,this._unsubscribeAll=new _.x}ngOnInit(){this.monthlyProfits$=this._monthlyProfitsService.monthlyProfits$,this._fuseMediaWatcherService.onMediaChange$.pipe((0,J.R)(this._unsubscribeAll)).subscribe(({matchingAliases:o})=>{this.drawerMode=o.includes("lg")?"side":"over",this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}create(){this._monthlyProfitsService.create().subscribe(o=>{this._router.navigate(["./",o._id])})}}h.\u0275fac=function(o){return new(o||h)(t.Y36(c.gz),t.Y36(t.sBO),t.Y36(c.F0),t.Y36(N.T),t.Y36(a))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-monthly-profits-list"]],viewQuery:function(o,e){if(1&o&&t.Gf(F,7),2&o){let r;t.iGM(r=t.CRH())&&(e.matDrawer=r.first)}},decls:22,vars:17,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","md:w-160","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex-auto"],[1,"flex","flex-col","sm:flex-row","md:flex-col","flex-auto","justify-between","py-8","px-6","md:px-8"],[1,"flex","gap-6"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],["mat-flat-button","",1,"bg-lime-500",3,"click"],[1,"flex","items-center","mt-4","sm:mt-0","md:mt-4"],[1,"flex","gap-4"],[1,"flex-col"],[4,"ngIf"],["class","flex px-8 py-4 items-center gap-2 border-t hover:cursor-pointer",3,"ngClass","routerLink",4,"ngFor","ngForOf"],[1,"flex","px-8","py-4","items-center","gap-2","border-t","hover:cursor-pointer",3,"ngClass","routerLink"],[1,"flex","justify-between","items-center"],[1,"flex","gap-2","items-center"],[1,"text-secondary","text-xs"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"mat-drawer-container",1),t.NdJ("backdropClick",function(){return e.onBackdropClicked()}),t.TgZ(2,"mat-drawer",2,3),t._UZ(4,"router-outlet"),t.qZA(),t.TgZ(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),t._uU(10),t.ALo(11,"capitalize"),t.ALo(12,"transloco"),t.qZA(),t.TgZ(13,"button",9),t.NdJ("click",function(){return e.create()}),t._uU(14),t.ALo(15,"capitalize"),t.ALo(16,"transloco"),t.qZA()(),t.TgZ(17,"div",10),t._UZ(18,"div",11),t.qZA()(),t.TgZ(19,"div",12),t.YNc(20,G,2,1,"ng-container",13),t.ALo(21,"async"),t.qZA()()()()()),2&o&&(t.xp6(2),t.Q6J("mode",e.drawerMode)("opened",!1)("position","end")("disableClose",!0),t.xp6(8),t.hij(" ",t.lcZ(11,7,t.lcZ(12,9,"monthly profits"))," "),t.xp6(4),t.hij(" ",t.lcZ(15,11,t.lcZ(16,13,"add"))," "),t.xp6(6),t.Q6J("ngIf",t.lcZ(21,15,e.monthlyProfits$)))},dependencies:[f.mk,f.sg,f.O5,c.lC,c.rH,x.lW,b.jA,b.kh,b.LW,f.Ov,f.uU,L.e,O.H,T.Ot],encapsulation:2,changeDetection:0});var m=n(24006),z=n(29130),U=n(59549),Q=n(97392),w=n(284),D=n(10266);function V(i,o){if(1&i&&(t.TgZ(0,"span",19),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.monthlyProfit?null:e.monthlyProfit.name," ")}}function $(i,o){if(1&i&&(t.TgZ(0,"a",20),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" @",null==e.monthlyProfit?null:e.monthlyProfit.username," ")}}const Y=function(){return["../"]};class Z{constructor(o,e,r,l,s,ct,ft){this._router=o,this._listComponent=e,this._changeDetectorRef=r,this._formBuilder=l,this._fuseConfirmationService=s,this._translocoService=ct,this._monthlyProfitsService=ft,this.capitalizePipe=new L.e,this._unsubscribeAll=new _.x}ngOnInit(){this._listComponent.matDrawer.open(),this.form=this._formBuilder.group({_id:[""],userId:[""],username:[""],name:[""],time:[new Date],winAmount:[""],loseAmount:[""],winCount:[""],loseCount:[""],buyCount:[""],sellCount:[""]}),this._monthlyProfitsService.monthlyProfit$.pipe((0,J.R)(this._unsubscribeAll)).subscribe(o=>{this.monthlyProfit=o,this.form.patchValue(o),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDrawer(){return this._listComponent.matDrawer.close()}save(){this.form.invalid||(this.form.disable(),this._monthlyProfitsService.save(this.form.getRawValue()).subscribe(()=>{this.form.enable()},()=>{this.form.enable()}))}remove(){this._fuseConfirmationService.open({title:this.capitalizePipe.transform(this._translocoService.translate("are you sure")),message:this.capitalizePipe.transform(this._translocoService.translate("this action will remove your record")),actions:{confirm:{label:this.capitalizePipe.transform(this._translocoService.translate("remove"))},cancel:{label:this.capitalizePipe.transform(this._translocoService.translate("cancel"))}}}).afterClosed().subscribe(e=>{"confirmed"==e&&this._monthlyProfitsService.remove(this.form.getRawValue()).subscribe(()=>{this._router.navigate(["./management","monthlyProfits"])})})}}Z.\u0275fac=function(o){return new(o||Z)(t.Y36(c.F0),t.Y36(h),t.Y36(t.sBO),t.Y36(m.QS),t.Y36(z.R),t.Y36(T.Vn),t.Y36(a))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["app-monthly-profits-detail"]],decls:87,vars:88,consts:[[1,"flex","flex-col","w-full"],[1,"relative","w-full","px-8","sm:px-12","flex","items-center","py-6","justify-between"],[1,"flex","items-center","gap-2"],["class","text-2xl font-semibold text-lime-500",4,"ngIf"],["class","text-secondary hover:cursor-pointer",4,"ngIf"],["mat-icon-button","",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[3,"formGroup"],[1,"grid","grid-cols-1","gap-8","px-8","border-t","py-8"],["type","hidden",3,"formControlName"],[1,"flex","items-center","gap-6"],[1,"w-1/3"],[1,"fuse-mat-dense","fuse-mat-rounded","w-full",3,"subscriptSizing"],["matInput","","type","text",3,"formControlName"],[1,"flex","justify-between","px-8","py-8","border-t"],[1,"flex","gap-2"],["mat-flat-button","",1,"bg-red-500",3,"click"],["mat-button","",3,"routerLink"],["mat-flat-button","",1,"bg-lime-500",3,"click"],[1,"text-2xl","font-semibold","text-lime-500"],[1,"text-secondary","hover:cursor-pointer"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,V,2,1,"span",3),t.YNc(4,$,2,1,"a",4),t.qZA(),t.TgZ(5,"a",5),t._UZ(6,"mat-icon",6),t.qZA()(),t.TgZ(7,"form",7)(8,"div",8),t._UZ(9,"input",9),t.TgZ(10,"div",10)(11,"span",11),t._uU(12),t.ALo(13,"capitalize"),t.ALo(14,"transloco"),t.qZA(),t.TgZ(15,"mat-form-field",12),t._UZ(16,"input",13),t.qZA()(),t.TgZ(17,"div",10)(18,"span",11),t._uU(19),t.ALo(20,"capitalize"),t.ALo(21,"transloco"),t.qZA(),t.TgZ(22,"mat-form-field",12),t._UZ(23,"input",13),t.qZA()(),t.TgZ(24,"div",10)(25,"span",11),t._uU(26),t.ALo(27,"capitalize"),t.ALo(28,"transloco"),t.qZA(),t.TgZ(29,"mat-form-field",12),t._UZ(30,"input",13),t.qZA()(),t.TgZ(31,"div",10)(32,"span",11),t._uU(33),t.ALo(34,"capitalize"),t.ALo(35,"transloco"),t.qZA(),t.TgZ(36,"mat-form-field",12),t._UZ(37,"input",13),t.qZA()(),t.TgZ(38,"div",10)(39,"span",11),t._uU(40),t.ALo(41,"capitalize"),t.ALo(42,"transloco"),t.qZA(),t.TgZ(43,"mat-form-field",12),t._UZ(44,"input",13),t.qZA()(),t.TgZ(45,"div",10)(46,"span",11),t._uU(47),t.ALo(48,"capitalize"),t.ALo(49,"transloco"),t.qZA(),t.TgZ(50,"mat-form-field",12),t._UZ(51,"input",13),t.qZA()(),t.TgZ(52,"div",10)(53,"span",11),t._uU(54),t.ALo(55,"capitalize"),t.ALo(56,"transloco"),t.qZA(),t.TgZ(57,"mat-form-field",12),t._UZ(58,"input",13),t.qZA()(),t.TgZ(59,"div",10)(60,"span",11),t._uU(61),t.ALo(62,"capitalize"),t.ALo(63,"transloco"),t.qZA(),t.TgZ(64,"mat-form-field",12),t._UZ(65,"input",13),t.qZA()(),t.TgZ(66,"div",10)(67,"span",11),t._uU(68),t.ALo(69,"capitalize"),t.ALo(70,"transloco"),t.qZA(),t.TgZ(71,"mat-form-field",12),t._UZ(72,"input",13),t.qZA()()()(),t.TgZ(73,"div",14)(74,"div",15)(75,"button",16),t.NdJ("click",function(){return e.remove()}),t._uU(76),t.ALo(77,"capitalize"),t.ALo(78,"transloco"),t.qZA(),t.TgZ(79,"a",17),t._uU(80),t.ALo(81,"capitalize"),t.ALo(82,"transloco"),t.qZA()(),t.TgZ(83,"button",18),t.NdJ("click",function(){return e.save()}),t._uU(84),t.ALo(85,"capitalize"),t.ALo(86,"transloco"),t.qZA()()()),2&o&&(t.xp6(3),t.Q6J("ngIf",null==e.monthlyProfit?null:e.monthlyProfit.name),t.xp6(1),t.Q6J("ngIf",null==e.monthlyProfit?null:e.monthlyProfit.username),t.xp6(1),t.Q6J("matTooltip","Close")("routerLink",t.DdM(86,Y)),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x"),t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("formControlName","_id"),t.xp6(3),t.Oqu(t.lcZ(13,38,t.lcZ(14,40,"user identity"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","userId"),t.xp6(3),t.Oqu(t.lcZ(20,42,t.lcZ(21,44,"username"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","username"),t.xp6(3),t.Oqu(t.lcZ(27,46,t.lcZ(28,48,"name"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","name"),t.xp6(3),t.Oqu(t.lcZ(34,50,t.lcZ(35,52,"win amount"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","winAmount"),t.xp6(3),t.Oqu(t.lcZ(41,54,t.lcZ(42,56,"lose amount"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","loseAmount"),t.xp6(3),t.Oqu(t.lcZ(48,58,t.lcZ(49,60,"win count"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","winCount"),t.xp6(3),t.Oqu(t.lcZ(55,62,t.lcZ(56,64,"lose count"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","loseCount"),t.xp6(3),t.Oqu(t.lcZ(62,66,t.lcZ(63,68,"buy count"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","buyCount"),t.xp6(3),t.Oqu(t.lcZ(69,70,t.lcZ(70,72,"sell count"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","sellCount"),t.xp6(4),t.hij(" ",t.lcZ(77,74,t.lcZ(78,76,"remove"))," "),t.xp6(3),t.Q6J("routerLink",t.DdM(87,Y)),t.xp6(1),t.hij(" ",t.lcZ(81,78,t.lcZ(82,80,"cancel"))," "),t.xp6(4),t.hij(" ",t.lcZ(85,82,t.lcZ(86,84,"save"))," "))},dependencies:[f.O5,c.rH,x.zs,x.lW,x.o6,U.KE,Q.Hw,w.Nt,D.gM,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,L.e,T.Ot],encapsulation:2,changeDetection:0});class d{canDeactivate(o,e,r,l){let s=l.root;for(;s.firstChild;)s=s.firstChild;return!(l.url.includes("/management/monthlyProfits")&&!s.paramMap.get("id"))||o.closeDrawer().then(()=>!0)}}d.\u0275fac=function(o){return new(o||d)},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"});const H=[{path:"",component:h,resolve:{MonthlyProfitsResolver:u},children:[{path:":id",component:Z,resolve:{MonthlyProfitResolver:p},canDeactivate:[d]}]}];class v{}v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=t.oAB({type:v}),v.\u0275inj=t.cJS({imports:[c.Bz.forChild(H),c.Bz]});var W=n(9506),X=n(90811),K=n(56709),E=n(3238),tt=n(99602),ot=n(44850),et=n(28255),nt=n(73162),it=n(71948),rt=n(84385),st=n(7155),lt=n(20079),at=n(42185);class g{}g.\u0275fac=function(o){return new(o||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[f.ez,v,x.ot,X.vV,K.p9,tt.FA,ot.t,U.lN,Q.Ps,w.c,W.En,et.Tx,nt.Cv,it.Fk,E.si,rt.LD,b.SJ,st.p0,D.AV,lt.V,at.m,z.w]})}}]);