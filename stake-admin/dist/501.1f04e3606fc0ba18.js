"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[501],{74501:(dt,T,n)=>{n.r(T),n.d(T,{NewsModule:()=>D});var u=n(36895),c=n(89299),S=n(77579),Z=n(82722),U=n(15439),O=n.n(U),t=n(94650),I=n(94880),Y=n(61135),p=n(18505),h=n(39646),b=n(95698),A=n(63900),j=n(80529),B=n(65240);class d{constructor(i,e){this._httpClient=i,this._apiService=e,this._allNews=new Y.X(null),this._news=new Y.X(null)}get allNews$(){return this._allNews.asObservable()}get news$(){return this._news.asObservable()}getAllNews(){return this._httpClient.get(this._apiService.admin_news()).pipe((0,p.b)(i=>(this._allNews.next(i),(0,h.of)(i))))}getNewsById(i){return this._allNews.pipe((0,b.q)(1),(0,A.w)(e=>this._httpClient.get(this._apiService.admin_news_new(i)).pipe((0,p.b)(s=>{let o=e.findIndex(a=>a._id==s._id);return o>=0?e[o]=s:e.push(s),this._allNews.next(e),this._news.next(s),(0,h.of)(s)}))))}updateNewsById(i){return this._allNews.pipe((0,b.q)(1),(0,A.w)(e=>this._httpClient.post(this._apiService.admin_news_new(i._id),i).pipe((0,p.b)(s=>{let o=e.findIndex(a=>a._id==s._id);return o>=0?e[o]=s:e.push(s),this._allNews.next(e),this._news.next(s),(0,h.of)(s)}))))}deleteNewsById(i){return this._allNews.pipe((0,b.q)(1),(0,A.w)(e=>this._httpClient.delete(this._apiService.admin_news_new(i)).pipe((0,p.b)(()=>{let s=e.findIndex(o=>o._id==i);return s>=0&&e.splice(s,1),this._allNews.next(e),this._news.next(null),(0,h.of)(null)}))))}createNews(){return this._allNews.pipe((0,b.q)(1),(0,A.w)(i=>this._httpClient.post(this._apiService.admin_news(),{}).pipe((0,p.b)(e=>(i.push(e),this._allNews.next(i),this._news.next(e),(0,h.of)(e))))))}static#t=this.\u0275fac=function(e){return new(e||d)(t.LFG(j.eN),t.LFG(B.s))};static#e=this.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}var m=n(4859),f=n(59549),k=n(97392),y=n(23267),J=n(63317),z=n(85707);const R=["matDrawer"],_=function(l){return{"bg-card":l}},$=function(l){return["./",l]};function G(l,i){if(1&l&&(t.TgZ(0,"div",14)(1,"div")(2,"div"),t._uU(3),t.ALo(4,"date"),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"div",15),t._uU(7),t.ALo(8,"date"),t.qZA()()()),2&l){const e=i.$implicit,s=t.oxw(3);t.Q6J("ngClass",t.VKq(15,_,s.selected&&s.selected._id==e._id))("routerLink",t.VKq(17,$,e._id)),t.xp6(3),t.lnq(" ",t.xi3(4,6,e.start,"YYYY/MM/dd")," ~ ",t.xi3(5,9,e.end,"YYYY/MM/dd")," - ",e.title," "),t.xp6(4),t.hij(" ",t.xi3(8,12,e.time,"YYYY/MM/dd HH:mm:ss")," ")}}function H(l,i){if(1&l&&(t.ynx(0),t.YNc(1,G,9,19,"div",13),t.BQk()),2&l){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function V(l,i){if(1&l&&(t.ynx(0),t.YNc(1,H,2,1,"ng-container",12),t.BQk()),2&l){const e=i.ngIf;t.xp6(1),t.Q6J("ngIf",e.length>0)}}class v{constructor(i,e,s,o,a){this._activatedRoute=i,this._changeDetectorRef=e,this._router=s,this._fuseMediaWatcherService=o,this._newsService=a,this._unsubscribeAll=new S.x}ngOnInit(){this.allNews$=this._newsService.allNews$,this._newsService.allNews$.pipe((0,Z.R)(this._unsubscribeAll)).subscribe(i=>{this._changeDetectorRef.markForCheck()}),this._newsService.news$.pipe((0,Z.R)(this._unsubscribeAll)).subscribe(i=>{this.selected=i,this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,Z.R)(this._unsubscribeAll)).subscribe(({matchingAliases:i})=>{this.drawerMode=i.includes("lg")?"side":"over",this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}search(){}onTimeChange(i){let e=O()();switch(parseInt(i.value)){case 1:this.startDate=e.clone().subtract(1,"days").startOf("day").toDate(),this.endDate=e.clone().subtract(1,"days").endOf("day").toDate();break;case 2:this.startDate=e.clone().startOf("day").toDate(),this.endDate=e.clone().endOf("day").toDate();break;case 3:this.startDate=e.clone().subtract(1,"months").startOf("month").toDate(),this.endDate=e.clone().subtract(1,"months").endOf("month").toDate();break;case 4:this.startDate=e.clone().startOf("month").toDate(),this.endDate=e.clone().endOf("month").toDate();break;default:return}this.search()}add(){this._newsService.createNews().subscribe(i=>{this._router.navigate(["/news",i._id])})}static#t=this.\u0275fac=function(e){return new(e||v)(t.Y36(c.gz),t.Y36(t.sBO),t.Y36(c.F0),t.Y36(I.T),t.Y36(d))};static#e=this.\u0275cmp=t.Xpm({type:v,selectors:[["app-news-list"]],viewQuery:function(e,s){if(1&e&&t.Gf(R,7),2&e){let o;t.iGM(o=t.CRH())&&(s.matDrawer=o.first)}},decls:22,vars:17,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","md:w-160","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex-auto"],[1,"flex","flex-col","sm:flex-row","md:flex-col","flex-auto","justify-between","py-8","px-6","md:px-8"],[1,"flex","gap-6","items-center"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],["mat-flat-button","","color","primary",1,"px-4",3,"click"],["matIconPrefix","","svgIcon","heroicons_outline:plus-circle"],[1,"flex-col"],[4,"ngIf"],["class","flex px-8 py-4 items-center gap-2 border-t hover:cursor-pointer",3,"ngClass","routerLink",4,"ngFor","ngForOf"],[1,"flex","px-8","py-4","items-center","gap-2","border-t","hover:cursor-pointer",3,"ngClass","routerLink"],[1,"text-secondary","text-sm"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"mat-drawer-container",1),t.NdJ("backdropClick",function(){return s.onBackdropClicked()}),t.TgZ(2,"mat-drawer",2,3),t._UZ(4,"router-outlet"),t.qZA(),t.TgZ(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),t._uU(10),t.ALo(11,"capitalize"),t.ALo(12,"transloco"),t.qZA(),t.TgZ(13,"button",9),t.NdJ("click",function(){return s.add()}),t._UZ(14,"mat-icon",10),t.TgZ(15,"span"),t._uU(16),t.ALo(17,"capitalize"),t.ALo(18,"transloco"),t.qZA()()()(),t.TgZ(19,"div",11),t.YNc(20,V,2,1,"ng-container",12),t.ALo(21,"async"),t.qZA()()()()()),2&e&&(t.xp6(2),t.Q6J("mode",s.drawerMode)("opened",!1)("position","end")("disableClose",!0),t.xp6(8),t.hij(" ",t.lcZ(11,7,t.lcZ(12,9,"manage news"))," "),t.xp6(6),t.hij(" ",t.lcZ(17,11,t.lcZ(18,13,"add"))," "),t.xp6(4),t.Q6J("ngIf",t.lcZ(21,15,s.allNews$)))},dependencies:[u.mk,u.sg,u.O5,c.lC,c.rH,m.lW,f.qo,k.Hw,y.jA,y.kh,y.LW,u.Ov,u.uU,J.e,z.Ot],encapsulation:2,changeDetection:0})}var r=n(24006),C=n(99602),Q=n(284),W=n(39349),F=n(10266);const M=function(){return["../"]};class N{constructor(i,e,s,o,a,lt,ct){this._listComponent=i,this._activatedRoute=e,this._changeDetectorRef=s,this._router=o,this._fuseMediaWatcherService=a,this._formBuilder=lt,this._newsService=ct,this._unsubscribeAll=new S.x}closeDrawer(){return this._listComponent.matDrawer.close()}ngOnInit(){this._listComponent.matDrawer.open(),this.form=this._formBuilder.group({_id:["",r.kI.required],__v:[""],time:[""],title:["",r.kI.required],description:["",r.kI.required],data:[""],start:["",r.kI.required],end:["",r.kI.required]}),this._newsService.news$.pipe((0,Z.R)(this._unsubscribeAll)).subscribe(i=>{this.news=i,this.form.patchValue(i),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}save(){this.form.invalid||this._newsService.updateNewsById(this.form.getRawValue()).subscribe()}delete(){this._newsService.deleteNewsById(this.news._id).subscribe(()=>{this._router.navigate(["/news"])})}static#t=this.\u0275fac=function(e){return new(e||N)(t.Y36(v),t.Y36(c.gz),t.Y36(t.sBO),t.Y36(c.F0),t.Y36(I.T),t.Y36(r.QS),t.Y36(d))};static#e=this.\u0275cmp=t.Xpm({type:N,selectors:[["app-news-detail"]],decls:61,vars:64,consts:[[1,"flex","flex-col","w-full"],[1,"relative","w-full","px-8","sm:px-12","flex","items-center","py-6","justify-end"],["mat-icon-button","",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"border-t","pt-6","px-6"],[3,"formGroup"],["type","hidden","formControlName","_id"],["type","hidden","formControlName","__v"],["type","hidden","formControlName","time"],[1,"fuse-mat-dense","fuse-mat-rounded","w-full",3,"subscriptSizing"],["matInput","","type","text",3,"formControlName","spellcheck"],[1,"w-full","mt-6",3,"subscriptSizing"],["matInput","","type","text","cdkTextareaAutosize","",3,"formControlName","spellcheck"],[1,"fuse-mat-dense","fuse-mat-rounded","w-full","mt-6",3,"subscriptSizing"],["matInput","",3,"formControlName","matDatepicker"],["matIconSuffix","",3,"for"],["start",""],["end",""],[1,"flex","justify-between","px-8","py-8","border-t","mt-6"],[1,"flex","items-center","gap-2"],["mat-button","",3,"routerLink"],["mat-flat-button","",1,"bg-red-500",3,"click"],["mat-flat-button","",1,"bg-lime-500",3,"click"]],template:function(e,s){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"a",2),t._UZ(3,"mat-icon",3),t.qZA()(),t.TgZ(4,"div",4)(5,"form",5),t._UZ(6,"input",6)(7,"input",7)(8,"input",8),t.TgZ(9,"mat-form-field",9)(10,"mat-label"),t._uU(11),t.ALo(12,"capitalize"),t.ALo(13,"transloco"),t.qZA(),t._UZ(14,"input",10),t.qZA(),t.TgZ(15,"mat-form-field",11)(16,"mat-label"),t._uU(17),t.ALo(18,"capitalize"),t.ALo(19,"transloco"),t.qZA(),t.TgZ(20,"textarea",12),t._uU(21,"\n                "),t.qZA()(),t.TgZ(22,"mat-form-field",11)(23,"mat-label"),t._uU(24),t.ALo(25,"capitalize"),t.ALo(26,"transloco"),t.qZA(),t.TgZ(27,"textarea",12),t._uU(28,"\n                "),t.qZA()(),t.TgZ(29,"mat-form-field",13)(30,"mat-label"),t._uU(31),t.ALo(32,"capitalize"),t.ALo(33,"transloco"),t.qZA(),t._UZ(34,"input",14)(35,"mat-datepicker-toggle",15)(36,"mat-datepicker",null,16),t.qZA(),t.TgZ(38,"mat-form-field",13)(39,"mat-label"),t._uU(40),t.ALo(41,"capitalize"),t.ALo(42,"transloco"),t.qZA(),t._UZ(43,"input",14)(44,"mat-datepicker-toggle",15)(45,"mat-datepicker",null,17),t.qZA()()(),t.TgZ(47,"div",18)(48,"div",19)(49,"a",20),t._uU(50),t.ALo(51,"capitalize"),t.ALo(52,"transloco"),t.qZA(),t.TgZ(53,"button",21),t.NdJ("click",function(){return s.delete()}),t._uU(54),t.ALo(55,"capitalize"),t.ALo(56,"transloco"),t.qZA()(),t.TgZ(57,"button",22),t.NdJ("click",function(){return s.save()}),t._uU(58),t.ALo(59,"capitalize"),t.ALo(60,"transloco"),t.qZA()()()),2&e){const o=t.MAs(37),a=t.MAs(46);t.xp6(2),t.Q6J("matTooltip","Close")("routerLink",t.DdM(62,M)),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x"),t.xp6(2),t.Q6J("formGroup",s.form),t.xp6(4),t.Q6J("subscriptSizing","dynamic"),t.xp6(2),t.hij(" ",t.lcZ(12,30,t.lcZ(13,32,"title"))," "),t.xp6(3),t.Q6J("formControlName","title")("spellcheck",!1),t.xp6(1),t.Q6J("subscriptSizing","dynamic"),t.xp6(2),t.hij(" ",t.lcZ(18,34,t.lcZ(19,36,"description"))," "),t.xp6(3),t.Q6J("formControlName","description")("spellcheck",!1),t.xp6(2),t.Q6J("subscriptSizing","dynamic"),t.xp6(2),t.hij(" ",t.lcZ(25,38,t.lcZ(26,40,"data"))," "),t.xp6(3),t.Q6J("formControlName","data")("spellcheck",!1),t.xp6(2),t.Q6J("subscriptSizing","dynamic"),t.xp6(2),t.hij(" ",t.lcZ(32,42,t.lcZ(33,44,"start date"))," "),t.xp6(3),t.Q6J("formControlName","start")("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(2),t.hij(" ",t.lcZ(41,46,t.lcZ(42,48,"end date"))," "),t.xp6(3),t.Q6J("formControlName","end")("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(5),t.Q6J("routerLink",t.DdM(63,M)),t.xp6(1),t.hij(" ",t.lcZ(51,50,t.lcZ(52,52,"cancel"))," "),t.xp6(4),t.hij(" ",t.lcZ(55,54,t.lcZ(56,56,"delete"))," "),t.xp6(4),t.hij(" ",t.lcZ(59,58,t.lcZ(60,60,"save"))," ")}},dependencies:[c.rH,m.zs,m.lW,m.o6,C.Mq,C.hl,C.nW,f.KE,f.hX,f.R9,k.Hw,Q.Nt,W.IC,F.gM,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,J.e,z.Ot]})}class g{constructor(i){this._newsService=i}resolve(i,e){return this._newsService.getAllNews()}static#t=this.\u0275fac=function(e){return new(e||g)(t.LFG(d))};static#e=this.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}class x{constructor(i){this._newsService=i}resolve(i,e){return this._newsService.getNewsById(i.paramMap.get("id"))}static#t=this.\u0275fac=function(e){return new(e||x)(t.LFG(d))};static#e=this.\u0275prov=t.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"})}class w{canDeactivate(i,e,s,o){let a=o.root;for(;a.firstChild;)a=a.firstChild;return!(o.url.includes("/news")&&!a.paramMap.get("id"))||i.closeDrawer().then(()=>!0)}static#t=this.\u0275fac=function(e){return new(e||w)};static#e=this.\u0275prov=t.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}const X=[{path:"",component:v,resolve:{AllNewsResolver:g},children:[{path:":id",component:N,resolve:{NewsResolver:x},canDeactivate:[w]}]}];class L{static#t=this.\u0275fac=function(e){return new(e||L)};static#e=this.\u0275mod=t.oAB({type:L});static#i=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(X),c.Bz]})}var K=n(9506),E=n(90811),P=n(56709),q=n(3238),tt=n(44850),et=n(28255),it=n(73162),nt=n(71948),st=n(84385),ot=n(7155),at=n(20079),rt=n(42185);class D{static#t=this.\u0275fac=function(e){return new(e||D)};static#e=this.\u0275mod=t.oAB({type:D});static#i=this.\u0275inj=t.cJS({imports:[u.ez,L,m.ot,E.vV,P.p9,C.FA,tt.t,f.lN,k.Ps,Q.c,K.En,et.Tx,it.Cv,nt.Fk,q.si,st.LD,y.SJ,ot.p0,F.AV,at.V,rt.m]})}}}]);