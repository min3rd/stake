"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[340],{41340:(gt,b,r)=>{r.r(b),r.d(b,{PartnersModule:()=>x});var l=r(36895),p=r(89299),T=r(77579),A=r(82722),t=r(94650),w=r(94880),C=r(61135),_=r(18505),y=r(95698),R=r(63900),k=r(39646),Y=r(80529),J=r(65240);class c{constructor(e,n){this._httpClient=e,this._apiService=n,this._partnerRegistrations=new C.X(null),this._partnerRegistration=new C.X(null)}get partneRegistrations$(){return this._partnerRegistrations.asObservable()}get partneRegistration$(){return this._partnerRegistration.asObservable()}getAll(){return this._httpClient.get(this._apiService.admin_partner_registrations()).pipe((0,_.b)(e=>{this._partnerRegistrations.next(e)}))}getById(e){return this._partnerRegistrations.pipe((0,y.q)(1),(0,R.w)(n=>this._httpClient.get(this._apiService.admin_partner_registrations_partner_registration(e)).pipe((0,_.b)(i=>{let a=n.findIndex(s=>s._id==i._id);return n[a]=i,this._partnerRegistration.next(i),this._partnerRegistrations.next(n),(0,k.of)(i)}))))}save(e){return this._partnerRegistrations.pipe((0,y.q)(1),(0,R.w)(n=>this._httpClient.post(this._apiService.admin_partner_registrations_partner_registration(e._id),e).pipe((0,_.b)(i=>{let a=n.findIndex(s=>s._id==i._id);return n[a]=i,this._partnerRegistration.next(i),this._partnerRegistrations.next(n),(0,k.of)(i)}))))}static#t=this.\u0275fac=function(n){return new(n||c)(t.LFG(Y.eN),t.LFG(J.s))};static#e=this.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}var v=r(23267),U=r(63317),L=r(85707);const j=["matDrawer"];function Q(o,e){1&o&&(t.TgZ(0,"div"),t._UZ(1,"div",14)(2,"div",15),t.qZA())}function N(o,e){1&o&&(t.TgZ(0,"div"),t._UZ(1,"div",16),t.qZA())}function F(o,e){1&o&&(t.TgZ(0,"div"),t._UZ(1,"div",17),t.qZA())}function P(o,e){if(1&o&&(t.ynx(0),t.TgZ(1,"div",18)(2,"div")(3,"div",19)(4,"div"),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7,"-"),t.qZA(),t.TgZ(8,"div"),t._uU(9),t.qZA(),t.TgZ(10,"span"),t._uU(11,"-"),t.qZA(),t.TgZ(12,"div"),t._uU(13),t.qZA()(),t.TgZ(14,"div",20),t._uU(15),t.ALo(16,"date"),t.qZA()(),t._UZ(17,"div"),t.qZA(),t.BQk()),2&o){const n=t.oxw().$implicit;t.xp6(5),t.hij(" ",n.name," "),t.xp6(4),t.hij(" (",n.username,") "),t.xp6(4),t.hij(" ",n.address," "),t.xp6(2),t.hij(" ",t.xi3(16,4,n.time,"YYYY-MM-dd HH:mm:ss")," ")}}const B=function(o){return{"bg-card":o}},M=function(o){return["./",o]};function O(o,e){if(1&o&&(t.TgZ(0,"div",13),t.ynx(1),t.YNc(2,Q,3,0,"div",11),t.YNc(3,N,2,0,"div",11),t.YNc(4,F,2,0,"div",11),t.BQk(),t.YNc(5,P,18,7,"ng-container",11),t.qZA()),2&o){const n=e.$implicit,i=t.oxw(3);t.Q6J("ngClass",t.VKq(6,B,i.selected&&i.selected._id==n._id))("routerLink",t.VKq(8,M,n._id)),t.xp6(2),t.Q6J("ngIf",0==n.status),t.xp6(1),t.Q6J("ngIf",1==n.status),t.xp6(1),t.Q6J("ngIf",2==n.status),t.xp6(1),t.Q6J("ngIf",n.username)}}function $(o,e){if(1&o&&(t.ynx(0),t.YNc(1,O,6,10,"div",12),t.BQk()),2&o){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}function E(o,e){if(1&o&&(t.ynx(0),t.YNc(1,$,2,1,"ng-container",11),t.BQk()),2&o){const n=e.ngIf;t.xp6(1),t.Q6J("ngIf",n.length>0)}}class d{constructor(e,n,i,a,s){this._activatedRoute=e,this._changeDetectorRef=n,this._router=i,this._fuseMediaWatcherService=a,this._partnersService=s,this._unsubscribeAll=new T.x}ngOnInit(){this.partnerRegistrations$=this._partnersService.partneRegistrations$,this._fuseMediaWatcherService.onMediaChange$.pipe((0,A.R)(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{this.drawerMode=e.includes("lg")?"side":"over",this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}static#t=this.\u0275fac=function(n){return new(n||d)(t.Y36(p.gz),t.Y36(t.sBO),t.Y36(p.F0),t.Y36(w.T),t.Y36(c))};static#e=this.\u0275cmp=t.Xpm({type:d,selectors:[["app-partner-list"]],viewQuery:function(n,i){if(1&n&&t.Gf(j,7),2&n){let a;t.iGM(a=t.CRH())&&(i.matDrawer=a.first)}},decls:18,vars:12,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","md:w-160","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex-auto"],[1,"flex","flex-col","sm:flex-row","md:flex-col","flex-auto","justify-between","py-8","px-6","md:px-8"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],[1,"flex","items-center","mt-4","sm:mt-0","md:mt-4"],[1,"flex","gap-4"],[1,"flex-col"],[4,"ngIf"],["class","flex px-8 py-4 items-center gap-2 border-t hover:cursor-pointer",3,"ngClass","routerLink",4,"ngFor","ngForOf"],[1,"flex","px-8","py-4","items-center","gap-2","border-t","hover:cursor-pointer",3,"ngClass","routerLink"],[1,"absolute","rounded-full","bg-amber-500","icon-size-4","transition","animate-ping"],[1,"rounded-full","bg-amber-500","icon-size-4"],[1,"rounded-full","bg-lime-500","icon-size-3"],[1,"rounded-full","bg-red-500","icon-size-3"],[1,"flex","justify-between","items-center"],[1,"flex","gap-2","items-center"],[1,"text-secondary","text-xs"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"mat-drawer-container",1),t.NdJ("backdropClick",function(){return i.onBackdropClicked()}),t.TgZ(2,"mat-drawer",2,3),t._UZ(4,"router-outlet"),t.qZA(),t.TgZ(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div")(9,"div",7),t._uU(10),t.ALo(11,"capitalize"),t.ALo(12,"transloco"),t.qZA()(),t.TgZ(13,"div",8),t._UZ(14,"div",9),t.qZA()(),t.TgZ(15,"div",10),t.YNc(16,E,2,1,"ng-container",11),t.ALo(17,"async"),t.qZA()()()()()),2&n&&(t.xp6(2),t.Q6J("mode",i.drawerMode)("opened",!1)("position","end")("disableClose",!0),t.xp6(8),t.hij(" ",t.lcZ(11,6,t.lcZ(12,8,"partners"))," "),t.xp6(6),t.Q6J("ngIf",t.lcZ(17,10,i.partnerRegistrations$)))},dependencies:[l.mk,l.sg,l.O5,p.lC,p.rH,v.jA,v.kh,v.LW,l.Ov,l.uU,U.e,L.Ot],encapsulation:2,changeDetection:0})}class u{constructor(e){this._partnersService=e}resolve(e,n){return this._partnersService.getAll()}static#t=this.\u0275fac=function(n){return new(n||u)(t.LFG(c))};static#e=this.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}class g{constructor(e){this._partnersService=e}resolve(e,n){return this._partnersService.getById(e.paramMap.get("id"))}static#t=this.\u0275fac=function(n){return new(n||g)(t.LFG(c))};static#e=this.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}const z_Status_SUCCESS=1,z_Status_CANCELED=2;var m=r(4859),D=r(97392),I=r(10266);function W(o,e){1&o&&(t.TgZ(0,"div"),t._UZ(1,"div",22)(2,"div",23),t.qZA())}function G(o,e){1&o&&(t.TgZ(0,"div"),t._UZ(1,"div",24)(2,"div",25),t.qZA())}function H(o,e){1&o&&(t.TgZ(0,"div"),t._UZ(1,"div",26)(2,"div",27),t.qZA())}const V=function(o){return["/management","users",o]},S=function(){return["../"]};class h{constructor(e,n,i){this._listComponent=e,this._changeDetectorRef=n,this._partnersService=i,this._unsubscribeAll=new T.x}ngOnInit(){this._listComponent.matDrawer.open(),this._partnersService.partneRegistration$.pipe((0,A.R)(this._unsubscribeAll)).subscribe(e=>{this.partnerRegistration=e,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDrawer(){return this._listComponent.matDrawer.close()}zalo(e){if(e.startsWith("http"))return window.open(e,"_blank");window.open(`https://zalo.me/${e}`,"_blank")}telegram(e){if(e.startsWith("http"))return window.open(e,"_blank");window.open(`https://telegram.me/${e}`,"_blank")}facebook(e){if(e.startsWith("http"))return window.open(e,"_blank");window.open(`https://fb.com/${e}`,"_blank")}accept(){this.partnerRegistration.status=z_Status_SUCCESS,this._partnersService.save(this.partnerRegistration).subscribe()}deny(){this.partnerRegistration.status=z_Status_CANCELED,this._partnersService.save(this.partnerRegistration).subscribe()}static#t=this.\u0275fac=function(n){return new(n||h)(t.Y36(d),t.Y36(t.sBO),t.Y36(c))};static#e=this.\u0275cmp=t.Xpm({type:h,selectors:[["app-partners-detail"]],decls:54,vars:34,consts:[[1,"flex","flex-col","w-full"],[1,"relative","w-full","px-8","sm:px-12","flex","items-center","py-6","justify-between"],[4,"ngIf"],[1,"flex","items-center","gap-2"],[1,"text-2xl","font-semibold","text-lime-500"],[1,"text-secondary","hover:cursor-pointer",3,"routerLink"],["mat-icon-button","",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"grid","grid-cols-1","gap-8","px-8","border-t","py-8"],[1,"flex","items-center","gap-6"],["svgIcon","heroicons_outline:map"],["svgIcon","heroicons_outline:phone"],["src","/assets/images/ui/applications/zalo.png","alt","Zalo",1,"icon-size-8","rounded-md"],["mat-icon-button","",3,"click"],["svgIcon","heroicons_outline:link"],["src","/assets/images/ui/applications/telegram.png","alt","Zalo",1,"icon-size-8","rounded-md"],["src","/assets/images/ui/applications/facebook.png","alt","Zalo",1,"icon-size-8","rounded-md"],[1,"flex","justify-between","px-8","py-8","border-t"],[1,"flex","gap-2"],["mat-flat-button","",1,"bg-red-500",3,"click"],["mat-button","",3,"routerLink"],["mat-flat-button","",1,"bg-lime-500",3,"click"],[1,"absolute","rounded-full","bg-amber-500","icon-size-3","transition","animate-ping"],[1,"rounded-full","bg-amber-500","icon-size-3"],[1,"absolute","rounded-full","bg-lime-500","icon-size-3","transition","animate-ping"],[1,"rounded-full","bg-lime-500","icon-size-3"],[1,"absolute","rounded-full","bg-red-500","icon-size-3","transition","animate-ping"],[1,"rounded-full","bg-red-500","icon-size-3"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.ynx(2),t.YNc(3,W,3,0,"div",2),t.YNc(4,G,3,0,"div",2),t.YNc(5,H,3,0,"div",2),t.BQk(),t.TgZ(6,"div",3)(7,"span",4),t._uU(8),t.qZA(),t.TgZ(9,"a",5),t._uU(10),t.qZA()(),t.TgZ(11,"a",6),t._UZ(12,"mat-icon",7),t.qZA()(),t.TgZ(13,"div",8)(14,"div",9),t._UZ(15,"mat-icon",10),t.TgZ(16,"div"),t._uU(17),t.qZA()(),t.TgZ(18,"div",9),t._UZ(19,"mat-icon",11),t.TgZ(20,"div"),t._uU(21),t.qZA()(),t.TgZ(22,"div",9),t._UZ(23,"img",12),t.TgZ(24,"div"),t._uU(25),t.qZA(),t.TgZ(26,"button",13),t.NdJ("click",function(){return i.zalo(i.partnerRegistration.zalo)}),t._UZ(27,"mat-icon",14),t.qZA()(),t.TgZ(28,"div",9),t._UZ(29,"img",15),t.TgZ(30,"div"),t._uU(31),t.qZA(),t.TgZ(32,"button",13),t.NdJ("click",function(){return i.telegram(i.partnerRegistration.telegram)}),t._UZ(33,"mat-icon",14),t.qZA()(),t.TgZ(34,"div",9),t._UZ(35,"img",16),t.TgZ(36,"div"),t._uU(37),t.qZA(),t.TgZ(38,"button",13),t.NdJ("click",function(){return i.facebook(i.partnerRegistration.facebook)}),t._UZ(39,"mat-icon",14),t.qZA()()(),t.TgZ(40,"div",17)(41,"div",18)(42,"button",19),t.NdJ("click",function(){return i.deny()}),t._uU(43),t.ALo(44,"capitalize"),t.ALo(45,"transloco"),t.qZA(),t.TgZ(46,"a",20),t._uU(47),t.ALo(48,"capitalize"),t.ALo(49,"transloco"),t.qZA()(),t.TgZ(50,"button",21),t.NdJ("click",function(){return i.accept()}),t._uU(51),t.ALo(52,"capitalize"),t.ALo(53,"transloco"),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("ngIf",0==i.partnerRegistration.status),t.xp6(1),t.Q6J("ngIf",1==i.partnerRegistration.status),t.xp6(1),t.Q6J("ngIf",2==i.partnerRegistration.status),t.xp6(3),t.hij(" ",i.partnerRegistration.name," "),t.xp6(1),t.Q6J("routerLink",t.VKq(30,V,i.partnerRegistration.userId)),t.xp6(1),t.hij(" @",i.partnerRegistration.username," "),t.xp6(1),t.Q6J("matTooltip","Close")("routerLink",t.DdM(32,S)),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x"),t.xp6(5),t.hij(" ",i.partnerRegistration.address," "),t.xp6(4),t.hij(" ",i.partnerRegistration.phone," "),t.xp6(4),t.hij(" ",i.partnerRegistration.zalo," "),t.xp6(6),t.hij(" ",i.partnerRegistration.telegram," "),t.xp6(6),t.hij(" ",i.partnerRegistration.facebook," "),t.xp6(6),t.hij(" ",t.lcZ(44,18,t.lcZ(45,20,"deny"))," "),t.xp6(3),t.Q6J("routerLink",t.DdM(33,S)),t.xp6(1),t.hij(" ",t.lcZ(48,22,t.lcZ(49,24,"cancel"))," "),t.xp6(4),t.hij(" ",t.lcZ(52,26,t.lcZ(53,28,"accept"))," "))},dependencies:[l.O5,p.rH,m.zs,m.lW,m.o6,m.RK,D.Hw,I.gM,U.e,L.Ot],encapsulation:2,changeDetection:0})}class f{canDeactivate(e,n,i,a){let s=a.root;for(;s.firstChild;)s=s.firstChild;return!(a.url.includes("/management/partners")&&!s.paramMap.get("id"))||e.closeDrawer().then(()=>!0)}static#t=this.\u0275fac=function(n){return new(n||f)};static#e=this.\u0275prov=t.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}const K=[{path:"",component:d,resolve:{PartnerRegistrationsResolver:u},children:[{path:":id",component:h,resolve:{PartnerRegistrationResolver:g},canDeactivate:[f]}]}];class Z{static#t=this.\u0275fac=function(n){return new(n||Z)};static#e=this.\u0275mod=t.oAB({type:Z});static#n=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(K),p.Bz]})}var X=r(9506),q=r(90811),tt=r(56709),et=r(3238),nt=r(99602),it=r(44850),rt=r(59549),ot=r(284),at=r(28255),st=r(73162),ct=r(71948),lt=r(84385),pt=r(7155),dt=r(20079),ut=r(42185);class x{static#t=this.\u0275fac=function(n){return new(n||x)};static#e=this.\u0275mod=t.oAB({type:x});static#n=this.\u0275inj=t.cJS({imports:[l.ez,Z,m.ot,q.vV,tt.p9,nt.FA,it.t,rt.lN,D.Ps,ot.c,X.En,at.Tx,st.Cv,ct.Fk,et.si,lt.LD,v.SJ,pt.p0,I.AV,dt.V,ut.m]})}}}]);