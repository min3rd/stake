"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[340],{41340:(gt,b,r)=>{r.r(b),r.d(b,{PartnersModule:()=>v});var l=r(36895),d=r(89299),C=r(77579),T=r(82722),t=r(94650),I=r(94880),A=r(61135),_=r(18505),R=r(95698),y=r(63900),P=r(39646),w=r(80529),Y=r(65240);class s{constructor(e,n){this._httpClient=e,this._apiService=n,this._partnerRegistrations=new A.X(null),this._partnerRegistration=new A.X(null)}get partneRegistrations$(){return this._partnerRegistrations.asObservable()}get partneRegistration$(){return this._partnerRegistration.asObservable()}getAll(){return this._httpClient.get(this._apiService.admin_partner_registrations()).pipe((0,_.b)(e=>{this._partnerRegistrations.next(e)}))}getById(e){return this._partnerRegistrations.pipe((0,R.q)(1),(0,y.w)(n=>this._httpClient.get(this._apiService.admin_partner_registrations_partner_registration(e)).pipe((0,_.b)(o=>{let c=n.findIndex(a=>a._id==o._id);return n[c]=o,this._partnerRegistration.next(o),this._partnerRegistrations.next(n),(0,P.of)(o)}))))}save(e){return this._partnerRegistrations.pipe((0,R.q)(1),(0,y.w)(n=>this._httpClient.post(this._apiService.admin_partner_registrations_partner_registration(e._id),e).pipe((0,_.b)(o=>{let c=n.findIndex(a=>a._id==o._id);return n[c]=o,this._partnerRegistration.next(o),this._partnerRegistrations.next(n),(0,P.of)(o)}))))}}s.\u0275fac=function(e){return new(e||s)(t.LFG(w.eN),t.LFG(Y.s))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"});var x=r(23267),k=r(63317),L=r(85707);const J=["matDrawer"];function j(i,e){1&i&&(t.TgZ(0,"div"),t._UZ(1,"div",14)(2,"div",15),t.qZA())}function Q(i,e){1&i&&(t.TgZ(0,"div"),t._UZ(1,"div",16),t.qZA())}function N(i,e){1&i&&(t.TgZ(0,"div"),t._UZ(1,"div",17),t.qZA())}function F(i,e){if(1&i&&(t.ynx(0),t.TgZ(1,"div",18)(2,"div")(3,"div",19)(4,"div"),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7,"-"),t.qZA(),t.TgZ(8,"div"),t._uU(9),t.qZA(),t.TgZ(10,"span"),t._uU(11,"-"),t.qZA(),t.TgZ(12,"div"),t._uU(13),t.qZA()(),t.TgZ(14,"div",20),t._uU(15),t.ALo(16,"date"),t.qZA()(),t._UZ(17,"div"),t.qZA(),t.BQk()),2&i){const n=t.oxw().$implicit;t.xp6(5),t.hij(" ",n.name," "),t.xp6(4),t.hij(" (",n.username,") "),t.xp6(4),t.hij(" ",n.address," "),t.xp6(2),t.hij(" ",t.xi3(16,4,n.time,"YYYY-MM-dd HH:mm:ss")," ")}}const M=function(i){return{"bg-card":i}},B=function(i){return["./",i]};function O(i,e){if(1&i&&(t.TgZ(0,"div",13),t.ynx(1),t.YNc(2,j,3,0,"div",11),t.YNc(3,Q,2,0,"div",11),t.YNc(4,N,2,0,"div",11),t.BQk(),t.YNc(5,F,18,7,"ng-container",11),t.qZA()),2&i){const n=e.$implicit,o=t.oxw(3);t.Q6J("ngClass",t.VKq(6,M,o.selected&&o.selected._id==n._id))("routerLink",t.VKq(8,B,n._id)),t.xp6(2),t.Q6J("ngIf",0==n.status),t.xp6(1),t.Q6J("ngIf",1==n.status),t.xp6(1),t.Q6J("ngIf",2==n.status),t.xp6(1),t.Q6J("ngIf",n.username)}}function $(i,e){if(1&i&&(t.ynx(0),t.YNc(1,O,6,10,"div",12),t.BQk()),2&i){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}function G(i,e){if(1&i&&(t.ynx(0),t.YNc(1,$,2,1,"ng-container",11),t.BQk()),2&i){const n=e.ngIf;t.xp6(1),t.Q6J("ngIf",n.length>0)}}class p{constructor(e,n,o,c,a){this._activatedRoute=e,this._changeDetectorRef=n,this._router=o,this._fuseMediaWatcherService=c,this._partnersService=a,this._unsubscribeAll=new C.x}ngOnInit(){this.partnerRegistrations$=this._partnersService.partneRegistrations$,this._fuseMediaWatcherService.onMediaChange$.pipe((0,T.R)(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{this.drawerMode=e.includes("lg")?"side":"over",this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}}p.\u0275fac=function(e){return new(e||p)(t.Y36(d.gz),t.Y36(t.sBO),t.Y36(d.F0),t.Y36(I.T),t.Y36(s))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-partner-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(J,7),2&e){let o;t.iGM(o=t.CRH())&&(n.matDrawer=o.first)}},decls:18,vars:12,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","md:w-160","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex-auto"],[1,"flex","flex-col","sm:flex-row","md:flex-col","flex-auto","justify-between","py-8","px-6","md:px-8"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],[1,"flex","items-center","mt-4","sm:mt-0","md:mt-4"],[1,"flex","gap-4"],[1,"flex-col"],[4,"ngIf"],["class","flex px-8 py-4 items-center gap-2 border-t hover:cursor-pointer",3,"ngClass","routerLink",4,"ngFor","ngForOf"],[1,"flex","px-8","py-4","items-center","gap-2","border-t","hover:cursor-pointer",3,"ngClass","routerLink"],[1,"absolute","rounded-full","bg-amber-500","icon-size-4","transition","animate-ping"],[1,"rounded-full","bg-amber-500","icon-size-4"],[1,"rounded-full","bg-lime-500","icon-size-3"],[1,"rounded-full","bg-red-500","icon-size-3"],[1,"flex","justify-between","items-center"],[1,"flex","gap-2","items-center"],[1,"text-secondary","text-xs"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"mat-drawer-container",1),t.NdJ("backdropClick",function(){return n.onBackdropClicked()}),t.TgZ(2,"mat-drawer",2,3),t._UZ(4,"router-outlet"),t.qZA(),t.TgZ(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div")(9,"div",7),t._uU(10),t.ALo(11,"capitalize"),t.ALo(12,"transloco"),t.qZA()(),t.TgZ(13,"div",8),t._UZ(14,"div",9),t.qZA()(),t.TgZ(15,"div",10),t.YNc(16,G,2,1,"ng-container",11),t.ALo(17,"async"),t.qZA()()()()()),2&e&&(t.xp6(2),t.Q6J("mode",n.drawerMode)("opened",!1)("position","end")("disableClose",!0),t.xp6(8),t.hij(" ",t.lcZ(11,6,t.lcZ(12,8,"partners"))," "),t.xp6(6),t.Q6J("ngIf",t.lcZ(17,10,n.partnerRegistrations$)))},dependencies:[l.mk,l.sg,l.O5,d.lC,d.rH,x.jA,x.kh,x.LW,l.Ov,l.uU,k.e,L.Ot],encapsulation:2,changeDetection:0});class u{constructor(e){this._partnersService=e}resolve(e,n){return this._partnersService.getAll()}}u.\u0275fac=function(e){return new(e||u)(t.LFG(s))},u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});class g{constructor(e){this._partnersService=e}resolve(e,n){return this._partnersService.getById(e.paramMap.get("id"))}}g.\u0275fac=function(e){return new(e||g)(t.LFG(s))},g.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"});const U_Status_SUCCESS=1,U_Status_CANCELED=2;var h=r(4859),D=r(97392),z=r(10266);function E(i,e){1&i&&(t.TgZ(0,"div"),t._UZ(1,"div",22)(2,"div",23),t.qZA())}function W(i,e){1&i&&(t.TgZ(0,"div"),t._UZ(1,"div",24)(2,"div",25),t.qZA())}function H(i,e){1&i&&(t.TgZ(0,"div"),t._UZ(1,"div",26)(2,"div",27),t.qZA())}const V=function(i){return["/management","users",i]},S=function(){return["../"]};class Z{constructor(e,n,o){this._listComponent=e,this._changeDetectorRef=n,this._partnersService=o,this._unsubscribeAll=new C.x}ngOnInit(){this._listComponent.matDrawer.open(),this._partnersService.partneRegistration$.pipe((0,T.R)(this._unsubscribeAll)).subscribe(e=>{this.partnerRegistration=e,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDrawer(){return this._listComponent.matDrawer.close()}zalo(e){if(e.startsWith("http"))return window.open(e,"_blank");window.open(`https://zalo.me/${e}`,"_blank")}telegram(e){if(e.startsWith("http"))return window.open(e,"_blank");window.open(`https://telegram.me/${e}`,"_blank")}facebook(e){if(e.startsWith("http"))return window.open(e,"_blank");window.open(`https://fb.com/${e}`,"_blank")}accept(){this.partnerRegistration.status=U_Status_SUCCESS,this._partnersService.save(this.partnerRegistration).subscribe()}deny(){this.partnerRegistration.status=U_Status_CANCELED,this._partnersService.save(this.partnerRegistration).subscribe()}}Z.\u0275fac=function(e){return new(e||Z)(t.Y36(p),t.Y36(t.sBO),t.Y36(s))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["app-partners-detail"]],decls:54,vars:34,consts:[[1,"flex","flex-col","w-full"],[1,"relative","w-full","px-8","sm:px-12","flex","items-center","py-6","justify-between"],[4,"ngIf"],[1,"flex","items-center","gap-2"],[1,"text-2xl","font-semibold","text-lime-500"],[1,"text-secondary","hover:cursor-pointer",3,"routerLink"],["mat-icon-button","",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"grid","grid-cols-1","gap-8","px-8","border-t","py-8"],[1,"flex","items-center","gap-6"],["svgIcon","heroicons_outline:map"],["svgIcon","heroicons_outline:phone"],["src","/assets/images/ui/applications/zalo.png","alt","Zalo",1,"icon-size-8","rounded-md"],["mat-icon-button","",3,"click"],["svgIcon","heroicons_outline:link"],["src","/assets/images/ui/applications/telegram.png","alt","Zalo",1,"icon-size-8","rounded-md"],["src","/assets/images/ui/applications/facebook.png","alt","Zalo",1,"icon-size-8","rounded-md"],[1,"flex","justify-between","px-8","py-8","border-t"],[1,"flex","gap-2"],["mat-flat-button","",1,"bg-red-500",3,"click"],["mat-button","",3,"routerLink"],["mat-flat-button","",1,"bg-lime-500",3,"click"],[1,"absolute","rounded-full","bg-amber-500","icon-size-3","transition","animate-ping"],[1,"rounded-full","bg-amber-500","icon-size-3"],[1,"absolute","rounded-full","bg-lime-500","icon-size-3","transition","animate-ping"],[1,"rounded-full","bg-lime-500","icon-size-3"],[1,"absolute","rounded-full","bg-red-500","icon-size-3","transition","animate-ping"],[1,"rounded-full","bg-red-500","icon-size-3"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.ynx(2),t.YNc(3,E,3,0,"div",2),t.YNc(4,W,3,0,"div",2),t.YNc(5,H,3,0,"div",2),t.BQk(),t.TgZ(6,"div",3)(7,"span",4),t._uU(8),t.qZA(),t.TgZ(9,"a",5),t._uU(10),t.qZA()(),t.TgZ(11,"a",6),t._UZ(12,"mat-icon",7),t.qZA()(),t.TgZ(13,"div",8)(14,"div",9),t._UZ(15,"mat-icon",10),t.TgZ(16,"div"),t._uU(17),t.qZA()(),t.TgZ(18,"div",9),t._UZ(19,"mat-icon",11),t.TgZ(20,"div"),t._uU(21),t.qZA()(),t.TgZ(22,"div",9),t._UZ(23,"img",12),t.TgZ(24,"div"),t._uU(25),t.qZA(),t.TgZ(26,"button",13),t.NdJ("click",function(){return n.zalo(n.partnerRegistration.zalo)}),t._UZ(27,"mat-icon",14),t.qZA()(),t.TgZ(28,"div",9),t._UZ(29,"img",15),t.TgZ(30,"div"),t._uU(31),t.qZA(),t.TgZ(32,"button",13),t.NdJ("click",function(){return n.telegram(n.partnerRegistration.telegram)}),t._UZ(33,"mat-icon",14),t.qZA()(),t.TgZ(34,"div",9),t._UZ(35,"img",16),t.TgZ(36,"div"),t._uU(37),t.qZA(),t.TgZ(38,"button",13),t.NdJ("click",function(){return n.facebook(n.partnerRegistration.facebook)}),t._UZ(39,"mat-icon",14),t.qZA()()(),t.TgZ(40,"div",17)(41,"div",18)(42,"button",19),t.NdJ("click",function(){return n.deny()}),t._uU(43),t.ALo(44,"capitalize"),t.ALo(45,"transloco"),t.qZA(),t.TgZ(46,"a",20),t._uU(47),t.ALo(48,"capitalize"),t.ALo(49,"transloco"),t.qZA()(),t.TgZ(50,"button",21),t.NdJ("click",function(){return n.accept()}),t._uU(51),t.ALo(52,"capitalize"),t.ALo(53,"transloco"),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("ngIf",0==n.partnerRegistration.status),t.xp6(1),t.Q6J("ngIf",1==n.partnerRegistration.status),t.xp6(1),t.Q6J("ngIf",2==n.partnerRegistration.status),t.xp6(3),t.hij(" ",n.partnerRegistration.name," "),t.xp6(1),t.Q6J("routerLink",t.VKq(30,V,n.partnerRegistration.userId)),t.xp6(1),t.hij(" @",n.partnerRegistration.username," "),t.xp6(1),t.Q6J("matTooltip","Close")("routerLink",t.DdM(32,S)),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x"),t.xp6(5),t.hij(" ",n.partnerRegistration.address," "),t.xp6(4),t.hij(" ",n.partnerRegistration.phone," "),t.xp6(4),t.hij(" ",n.partnerRegistration.zalo," "),t.xp6(6),t.hij(" ",n.partnerRegistration.telegram," "),t.xp6(6),t.hij(" ",n.partnerRegistration.facebook," "),t.xp6(6),t.hij(" ",t.lcZ(44,18,t.lcZ(45,20,"deny"))," "),t.xp6(3),t.Q6J("routerLink",t.DdM(33,S)),t.xp6(1),t.hij(" ",t.lcZ(48,22,t.lcZ(49,24,"cancel"))," "),t.xp6(4),t.hij(" ",t.lcZ(52,26,t.lcZ(53,28,"accept"))," "))},dependencies:[l.O5,d.rH,h.zs,h.lW,h.o6,h.RK,D.Hw,z.gM,k.e,L.Ot],encapsulation:2,changeDetection:0});class m{canDeactivate(e,n,o,c){let a=c.root;for(;a.firstChild;)a=a.firstChild;return!(c.url.includes("/management/partners")&&!a.paramMap.get("id"))||e.closeDrawer().then(()=>!0)}}m.\u0275fac=function(e){return new(e||m)},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});const K=[{path:"",component:p,resolve:{PartnerRegistrationsResolver:u},children:[{path:":id",component:Z,resolve:{PartnerRegistrationResolver:g},canDeactivate:[m]}]}];class f{}f.\u0275fac=function(e){return new(e||f)},f.\u0275mod=t.oAB({type:f}),f.\u0275inj=t.cJS({imports:[d.Bz.forChild(K),d.Bz]});var X=r(9506),q=r(90811),tt=r(56709),et=r(3238),nt=r(99602),it=r(44850),rt=r(59549),ot=r(284),at=r(28255),st=r(73162),ct=r(71948),lt=r(84385),dt=r(7155),pt=r(20079),ut=r(42185);class v{}v.\u0275fac=function(e){return new(e||v)},v.\u0275mod=t.oAB({type:v}),v.\u0275inj=t.cJS({imports:[l.ez,f,h.ot,q.vV,tt.p9,nt.FA,it.t,rt.lN,D.Ps,ot.c,X.En,at.Tx,st.Cv,ct.Fk,et.si,lt.LD,x.SJ,dt.p0,z.AV,pt.V,ut.m]})}}]);