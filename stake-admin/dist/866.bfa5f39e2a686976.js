"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[866],{73866:(ft,S,o)=>{o.r(S),o.d(S,{MonthlyProfitsModule:()=>T});var m=o(36895),t=o(94650),J=o(61135),p=o(18505),x=o(95698),Z=o(63900),y=o(39646),I=o(80529),N=o(65240);class l{constructor(i,e){this._httpClient=i,this._apiService=e,this._monthlyProfits=new J.X(null),this._monthlyProfit=new J.X(null)}get monthlyProfits$(){return this._monthlyProfits.asObservable()}get monthlyProfit$(){return this._monthlyProfit.asObservable()}getAll(){return this._httpClient.get(this._apiService.admin_monthly_profits()).pipe((0,p.b)(i=>{this._monthlyProfits.next(i)}))}getById(i){return this._monthlyProfits.pipe((0,x.q)(1),(0,Z.w)(e=>this._httpClient.get(this._apiService.admin_monthly_profits_monthly_profit(i)).pipe((0,p.b)(n=>{let r=e.findIndex(a=>a._id==n._id);return e[r]=n,this._monthlyProfit.next(n),this._monthlyProfits.next(e),(0,y.of)(n)}))))}create(){return this._monthlyProfits.pipe((0,x.q)(1),(0,Z.w)(i=>this._httpClient.post(this._apiService.admin_monthly_profits(),{}).pipe((0,p.b)(e=>(i.push(e),this._monthlyProfit.next(e),this._monthlyProfits.next(i),(0,y.of)(e))))))}save(i){return this._monthlyProfits.pipe((0,x.q)(1),(0,Z.w)(e=>this._httpClient.post(this._apiService.admin_monthly_profits_monthly_profit(i._id),i).pipe((0,p.b)(n=>{let r=e.findIndex(a=>a._id==n._id);return e[r]=n,this._monthlyProfit.next(n),this._monthlyProfits.next(e),(0,y.of)(n)}))))}remove(i){return this._monthlyProfits.pipe((0,x.q)(1),(0,Z.w)(e=>this._httpClient.delete(this._apiService.admin_monthly_profits_monthly_profit(i._id)).pipe((0,p.b)(n=>{let r=e.findIndex(a=>a._id==n._id);return e.splice(r,1),this._monthlyProfit.next(n),this._monthlyProfits.next(e),(0,y.of)(n)}))))}static#t=this.\u0275fac=function(e){return new(e||l)(t.LFG(I.eN),t.LFG(N.s))};static#e=this.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}class u{constructor(i){this._monthlyProfitsService=i}resolve(i,e){return this._monthlyProfitsService.getAll()}static#t=this.\u0275fac=function(e){return new(e||u)(t.LFG(l))};static#e=this.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}class h{constructor(i){this._monthlyProfitsService=i}resolve(i,e){return this._monthlyProfitsService.getById(i.paramMap.get("id"))}static#t=this.\u0275fac=function(e){return new(e||h)(t.LFG(l))};static#e=this.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}var c=o(89299),_=o(77579),z=o(82722),O=o(94880),d=o(4859),A=o(23267),L=o(63317),F=o(40758),P=o(85707);const j=["matDrawer"],R=function(s){return{"bg-card":s}},k=function(s){return["./",s]};function B(s,i){if(1&s&&(t.TgZ(0,"div",15)(1,"div",16)(2,"div")(3,"div",17)(4,"div"),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7,"-"),t.qZA(),t.TgZ(8,"div"),t._uU(9),t.qZA(),t.TgZ(10,"span"),t._uU(11,"-"),t.qZA(),t.TgZ(12,"div"),t._uU(13),t.ALo(14,"currency"),t.qZA()(),t.TgZ(15,"div",18),t._uU(16),t.ALo(17,"date"),t.qZA()()()()),2&s){const e=i.$implicit,n=t.oxw(3);t.Q6J("ngClass",t.VKq(11,R,n.selected&&n.selected._id==e._id))("routerLink",t.VKq(13,k,e._id)),t.xp6(5),t.hij(" ",e.name," "),t.xp6(4),t.hij(" (",e.username,") "),t.xp6(4),t.hij(" ",t.lcZ(14,6,e.winAmount-e.loseAmount)," "),t.xp6(3),t.hij(" ",t.xi3(17,8,e.time,"YYYY-MM-dd HH:mm:ss")," ")}}function q(s,i){if(1&s&&(t.ynx(0),t.YNc(1,B,18,15,"div",14),t.BQk()),2&s){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function V(s,i){if(1&s&&(t.ynx(0),t.YNc(1,q,2,1,"ng-container",13),t.BQk()),2&s){const e=i.ngIf;t.xp6(1),t.Q6J("ngIf",e.length>0)}}class v{constructor(i,e,n,r,a){this._activatedRoute=i,this._changeDetectorRef=e,this._router=n,this._fuseMediaWatcherService=r,this._monthlyProfitsService=a,this._unsubscribeAll=new _.x}ngOnInit(){this.monthlyProfits$=this._monthlyProfitsService.monthlyProfits$,this._fuseMediaWatcherService.onMediaChange$.pipe((0,z.R)(this._unsubscribeAll)).subscribe(({matchingAliases:i})=>{this.drawerMode=i.includes("lg")?"side":"over",this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}create(){this._monthlyProfitsService.create().subscribe(i=>{this._router.navigate(["./",i._id])})}static#t=this.\u0275fac=function(e){return new(e||v)(t.Y36(c.gz),t.Y36(t.sBO),t.Y36(c.F0),t.Y36(O.T),t.Y36(l))};static#e=this.\u0275cmp=t.Xpm({type:v,selectors:[["app-monthly-profits-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(j,7),2&e){let r;t.iGM(r=t.CRH())&&(n.matDrawer=r.first)}},decls:22,vars:17,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","md:w-160","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex-auto"],[1,"flex","flex-col","sm:flex-row","md:flex-col","flex-auto","justify-between","py-8","px-6","md:px-8"],[1,"flex","gap-6"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],["mat-flat-button","",1,"bg-lime-500",3,"click"],[1,"flex","items-center","mt-4","sm:mt-0","md:mt-4"],[1,"flex","gap-4"],[1,"flex-col"],[4,"ngIf"],["class","flex px-8 py-4 items-center gap-2 border-t hover:cursor-pointer",3,"ngClass","routerLink",4,"ngFor","ngForOf"],[1,"flex","px-8","py-4","items-center","gap-2","border-t","hover:cursor-pointer",3,"ngClass","routerLink"],[1,"flex","justify-between","items-center"],[1,"flex","gap-2","items-center"],[1,"text-secondary","text-xs"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"mat-drawer-container",1),t.NdJ("backdropClick",function(){return n.onBackdropClicked()}),t.TgZ(2,"mat-drawer",2,3),t._UZ(4,"router-outlet"),t.qZA(),t.TgZ(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),t._uU(10),t.ALo(11,"capitalize"),t.ALo(12,"transloco"),t.qZA(),t.TgZ(13,"button",9),t.NdJ("click",function(){return n.create()}),t._uU(14),t.ALo(15,"capitalize"),t.ALo(16,"transloco"),t.qZA()(),t.TgZ(17,"div",10),t._UZ(18,"div",11),t.qZA()(),t.TgZ(19,"div",12),t.YNc(20,V,2,1,"ng-container",13),t.ALo(21,"async"),t.qZA()()()()()),2&e&&(t.xp6(2),t.Q6J("mode",n.drawerMode)("opened",!1)("position","end")("disableClose",!0),t.xp6(8),t.hij(" ",t.lcZ(11,7,t.lcZ(12,9,"monthly profits"))," "),t.xp6(4),t.hij(" ",t.lcZ(15,11,t.lcZ(16,13,"add"))," "),t.xp6(6),t.Q6J("ngIf",t.lcZ(21,15,n.monthlyProfits$)))},dependencies:[m.mk,m.sg,m.O5,c.lC,c.rH,d.lW,A.jA,A.kh,A.LW,m.Ov,m.uU,L.e,F.H,P.Ot],encapsulation:2,changeDetection:0})}var f=o(24006),U=o(29130),Q=o(59549),w=o(97392),D=o(284),M=o(10266);function $(s,i){if(1&s&&(t.TgZ(0,"span",19),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.monthlyProfit?null:e.monthlyProfit.name," ")}}function G(s,i){if(1&s&&(t.TgZ(0,"a",20),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.hij(" @",null==e.monthlyProfit?null:e.monthlyProfit.username," ")}}const Y=function(){return["../"]};class C{constructor(i,e,n,r,a,ct,mt){this._router=i,this._listComponent=e,this._changeDetectorRef=n,this._formBuilder=r,this._fuseConfirmationService=a,this._translocoService=ct,this._monthlyProfitsService=mt,this.capitalizePipe=new L.e,this._unsubscribeAll=new _.x}ngOnInit(){this._listComponent.matDrawer.open(),this.form=this._formBuilder.group({_id:[""],userId:[""],username:[""],name:[""],time:[new Date],winAmount:[""],loseAmount:[""],winCount:[""],loseCount:[""],buyCount:[""],sellCount:[""]}),this._monthlyProfitsService.monthlyProfit$.pipe((0,z.R)(this._unsubscribeAll)).subscribe(i=>{this.monthlyProfit=i,this.form.patchValue(i),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDrawer(){return this._listComponent.matDrawer.close()}save(){this.form.invalid||(this.form.disable(),this._monthlyProfitsService.save(this.form.getRawValue()).subscribe(()=>{this.form.enable()},()=>{this.form.enable()}))}remove(){this._fuseConfirmationService.open({title:this.capitalizePipe.transform(this._translocoService.translate("are you sure")),message:this.capitalizePipe.transform(this._translocoService.translate("this action will remove your record")),actions:{confirm:{label:this.capitalizePipe.transform(this._translocoService.translate("remove"))},cancel:{label:this.capitalizePipe.transform(this._translocoService.translate("cancel"))}}}).afterClosed().subscribe(e=>{"confirmed"==e&&this._monthlyProfitsService.remove(this.form.getRawValue()).subscribe(()=>{this._router.navigate(["./management","monthlyProfits"])})})}static#t=this.\u0275fac=function(e){return new(e||C)(t.Y36(c.F0),t.Y36(v),t.Y36(t.sBO),t.Y36(f.QS),t.Y36(U.R),t.Y36(P.Vn),t.Y36(l))};static#e=this.\u0275cmp=t.Xpm({type:C,selectors:[["app-monthly-profits-detail"]],decls:87,vars:88,consts:[[1,"flex","flex-col","w-full"],[1,"relative","w-full","px-8","sm:px-12","flex","items-center","py-6","justify-between"],[1,"flex","items-center","gap-2"],["class","text-2xl font-semibold text-lime-500",4,"ngIf"],["class","text-secondary hover:cursor-pointer",4,"ngIf"],["mat-icon-button","",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[3,"formGroup"],[1,"grid","grid-cols-1","gap-8","px-8","border-t","py-8"],["type","hidden",3,"formControlName"],[1,"flex","items-center","gap-6"],[1,"w-1/3"],[1,"fuse-mat-dense","fuse-mat-rounded","w-full",3,"subscriptSizing"],["matInput","","type","text",3,"formControlName"],[1,"flex","justify-between","px-8","py-8","border-t"],[1,"flex","gap-2"],["mat-flat-button","",1,"bg-red-500",3,"click"],["mat-button","",3,"routerLink"],["mat-flat-button","",1,"bg-lime-500",3,"click"],[1,"text-2xl","font-semibold","text-lime-500"],[1,"text-secondary","hover:cursor-pointer"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,$,2,1,"span",3),t.YNc(4,G,2,1,"a",4),t.qZA(),t.TgZ(5,"a",5),t._UZ(6,"mat-icon",6),t.qZA()(),t.TgZ(7,"form",7)(8,"div",8),t._UZ(9,"input",9),t.TgZ(10,"div",10)(11,"span",11),t._uU(12),t.ALo(13,"capitalize"),t.ALo(14,"transloco"),t.qZA(),t.TgZ(15,"mat-form-field",12),t._UZ(16,"input",13),t.qZA()(),t.TgZ(17,"div",10)(18,"span",11),t._uU(19),t.ALo(20,"capitalize"),t.ALo(21,"transloco"),t.qZA(),t.TgZ(22,"mat-form-field",12),t._UZ(23,"input",13),t.qZA()(),t.TgZ(24,"div",10)(25,"span",11),t._uU(26),t.ALo(27,"capitalize"),t.ALo(28,"transloco"),t.qZA(),t.TgZ(29,"mat-form-field",12),t._UZ(30,"input",13),t.qZA()(),t.TgZ(31,"div",10)(32,"span",11),t._uU(33),t.ALo(34,"capitalize"),t.ALo(35,"transloco"),t.qZA(),t.TgZ(36,"mat-form-field",12),t._UZ(37,"input",13),t.qZA()(),t.TgZ(38,"div",10)(39,"span",11),t._uU(40),t.ALo(41,"capitalize"),t.ALo(42,"transloco"),t.qZA(),t.TgZ(43,"mat-form-field",12),t._UZ(44,"input",13),t.qZA()(),t.TgZ(45,"div",10)(46,"span",11),t._uU(47),t.ALo(48,"capitalize"),t.ALo(49,"transloco"),t.qZA(),t.TgZ(50,"mat-form-field",12),t._UZ(51,"input",13),t.qZA()(),t.TgZ(52,"div",10)(53,"span",11),t._uU(54),t.ALo(55,"capitalize"),t.ALo(56,"transloco"),t.qZA(),t.TgZ(57,"mat-form-field",12),t._UZ(58,"input",13),t.qZA()(),t.TgZ(59,"div",10)(60,"span",11),t._uU(61),t.ALo(62,"capitalize"),t.ALo(63,"transloco"),t.qZA(),t.TgZ(64,"mat-form-field",12),t._UZ(65,"input",13),t.qZA()(),t.TgZ(66,"div",10)(67,"span",11),t._uU(68),t.ALo(69,"capitalize"),t.ALo(70,"transloco"),t.qZA(),t.TgZ(71,"mat-form-field",12),t._UZ(72,"input",13),t.qZA()()()(),t.TgZ(73,"div",14)(74,"div",15)(75,"button",16),t.NdJ("click",function(){return n.remove()}),t._uU(76),t.ALo(77,"capitalize"),t.ALo(78,"transloco"),t.qZA(),t.TgZ(79,"a",17),t._uU(80),t.ALo(81,"capitalize"),t.ALo(82,"transloco"),t.qZA()(),t.TgZ(83,"button",18),t.NdJ("click",function(){return n.save()}),t._uU(84),t.ALo(85,"capitalize"),t.ALo(86,"transloco"),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("ngIf",null==n.monthlyProfit?null:n.monthlyProfit.name),t.xp6(1),t.Q6J("ngIf",null==n.monthlyProfit?null:n.monthlyProfit.username),t.xp6(1),t.Q6J("matTooltip","Close")("routerLink",t.DdM(86,Y)),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x"),t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(2),t.Q6J("formControlName","_id"),t.xp6(3),t.Oqu(t.lcZ(13,38,t.lcZ(14,40,"user identity"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","userId"),t.xp6(3),t.Oqu(t.lcZ(20,42,t.lcZ(21,44,"username"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","username"),t.xp6(3),t.Oqu(t.lcZ(27,46,t.lcZ(28,48,"name"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","name"),t.xp6(3),t.Oqu(t.lcZ(34,50,t.lcZ(35,52,"win amount"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","winAmount"),t.xp6(3),t.Oqu(t.lcZ(41,54,t.lcZ(42,56,"lose amount"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","loseAmount"),t.xp6(3),t.Oqu(t.lcZ(48,58,t.lcZ(49,60,"win count"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","winCount"),t.xp6(3),t.Oqu(t.lcZ(55,62,t.lcZ(56,64,"lose count"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","loseCount"),t.xp6(3),t.Oqu(t.lcZ(62,66,t.lcZ(63,68,"buy count"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","buyCount"),t.xp6(3),t.Oqu(t.lcZ(69,70,t.lcZ(70,72,"sell count"))),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("formControlName","sellCount"),t.xp6(4),t.hij(" ",t.lcZ(77,74,t.lcZ(78,76,"remove"))," "),t.xp6(3),t.Q6J("routerLink",t.DdM(87,Y)),t.xp6(1),t.hij(" ",t.lcZ(81,78,t.lcZ(82,80,"cancel"))," "),t.xp6(4),t.hij(" ",t.lcZ(85,82,t.lcZ(86,84,"save"))," "))},dependencies:[m.O5,c.rH,d.zs,d.lW,d.o6,Q.KE,w.Hw,D.Nt,M.gM,f._Y,f.Fj,f.JJ,f.JL,f.sg,f.u,L.e,P.Ot],encapsulation:2,changeDetection:0})}class g{canDeactivate(i,e,n,r){let a=r.root;for(;a.firstChild;)a=a.firstChild;return!(r.url.includes("/management/monthlyProfits")&&!a.paramMap.get("id"))||i.closeDrawer().then(()=>!0)}static#t=this.\u0275fac=function(e){return new(e||g)};static#e=this.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}const H=[{path:"",component:v,resolve:{MonthlyProfitsResolver:u},children:[{path:":id",component:C,resolve:{MonthlyProfitResolver:h},canDeactivate:[g]}]}];class b{static#t=this.\u0275fac=function(e){return new(e||b)};static#e=this.\u0275mod=t.oAB({type:b});static#i=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(H),c.Bz]})}var W=o(9506),X=o(90811),K=o(56709),E=o(3238),tt=o(99602),et=o(44850),it=o(28255),ot=o(73162),nt=o(71948),rt=o(84385),st=o(7155),at=o(20079),lt=o(42185);class T{static#t=this.\u0275fac=function(e){return new(e||T)};static#e=this.\u0275mod=t.oAB({type:T});static#i=this.\u0275inj=t.cJS({imports:[m.ez,b,d.ot,X.vV,K.p9,tt.FA,et.t,Q.lN,w.Ps,D.c,W.En,it.Tx,ot.Cv,nt.Fk,E.si,rt.LD,A.SJ,st.p0,M.AV,at.V,lt.m,U.w]})}}}]);