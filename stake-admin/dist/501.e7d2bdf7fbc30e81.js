"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[501],{74501:(dt,S,i)=>{i.r(S),i.d(S,{NewsModule:()=>g});var u=i(36895),c=i(89299),T=i(77579),b=i(82722),F=i(15439),U=i.n(F),t=i(94650),I=i(94880),Y=i(61135),x=i(18505),w=i(39646),C=i(95698),y=i(63900),O=i(80529),j=i(65240);class d{constructor(e,n){this._httpClient=e,this._apiService=n,this._allNews=new Y.X(null),this._news=new Y.X(null)}get allNews$(){return this._allNews.asObservable()}get news$(){return this._news.asObservable()}getAllNews(){return this._httpClient.get(this._apiService.admin_news()).pipe((0,x.b)(e=>(this._allNews.next(e),(0,w.of)(e))))}getNewsById(e){return this._allNews.pipe((0,C.q)(1),(0,y.w)(n=>this._httpClient.get(this._apiService.admin_news_new(e)).pipe((0,x.b)(s=>{let r=n.findIndex(l=>l._id==s._id);return r>=0?n[r]=s:n.push(s),this._allNews.next(n),this._news.next(s),(0,w.of)(s)}))))}updateNewsById(e){return this._allNews.pipe((0,C.q)(1),(0,y.w)(n=>this._httpClient.post(this._apiService.admin_news_new(e._id),e).pipe((0,x.b)(s=>{let r=n.findIndex(l=>l._id==s._id);return r>=0?n[r]=s:n.push(s),this._allNews.next(n),this._news.next(s),(0,w.of)(s)}))))}deleteNewsById(e){return this._allNews.pipe((0,C.q)(1),(0,y.w)(n=>this._httpClient.delete(this._apiService.admin_news_new(e)).pipe((0,x.b)(()=>{let s=n.findIndex(r=>r._id==e);return s>=0&&n.splice(s,1),this._allNews.next(n),this._news.next(null),(0,w.of)(null)}))))}createNews(){return this._allNews.pipe((0,C.q)(1),(0,y.w)(e=>this._httpClient.post(this._apiService.admin_news(),{}).pipe((0,x.b)(n=>(e.push(n),this._allNews.next(e),this._news.next(n),(0,w.of)(n))))))}}d.\u0275fac=function(e){return new(e||d)(t.LFG(O.eN),t.LFG(j.s))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"});var N=i(4859),Z=i(59549),k=i(97392),L=i(23267),J=i(63317),z=i(85707);const B=["matDrawer"],_=function(o){return{"bg-card":o}},G=function(o){return["./",o]};function $(o,e){if(1&o&&(t.TgZ(0,"div",14)(1,"div")(2,"div"),t._uU(3),t.ALo(4,"date"),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"div",15),t._uU(7),t.ALo(8,"date"),t.qZA()()()),2&o){const n=e.$implicit,s=t.oxw(3);t.Q6J("ngClass",t.VKq(15,_,s.selected&&s.selected._id==n._id))("routerLink",t.VKq(17,G,n._id)),t.xp6(3),t.lnq(" ",t.xi3(4,6,n.start,"YYYY/MM/dd")," ~ ",t.xi3(5,9,n.end,"YYYY/MM/dd")," - ",n.title," "),t.xp6(4),t.hij(" ",t.xi3(8,12,n.time,"YYYY/MM/dd HH:mm:ss")," ")}}function H(o,e){if(1&o&&(t.ynx(0),t.YNc(1,$,9,19,"div",13),t.BQk()),2&o){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}function V(o,e){if(1&o&&(t.ynx(0),t.YNc(1,H,2,1,"ng-container",12),t.BQk()),2&o){const n=e.ngIf;t.xp6(1),t.Q6J("ngIf",n.length>0)}}class p{constructor(e,n,s,r,l){this._activatedRoute=e,this._changeDetectorRef=n,this._router=s,this._fuseMediaWatcherService=r,this._newsService=l,this._unsubscribeAll=new T.x}ngOnInit(){this.allNews$=this._newsService.allNews$,this._newsService.allNews$.pipe((0,b.R)(this._unsubscribeAll)).subscribe(e=>{this._changeDetectorRef.markForCheck()}),this._newsService.news$.pipe((0,b.R)(this._unsubscribeAll)).subscribe(e=>{this.selected=e,this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,b.R)(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{this.drawerMode=e.includes("lg")?"side":"over",this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}search(){}onTimeChange(e){let n=U()();switch(parseInt(e.value)){case 1:this.startDate=n.clone().subtract(1,"days").startOf("day").toDate(),this.endDate=n.clone().subtract(1,"days").endOf("day").toDate();break;case 2:this.startDate=n.clone().startOf("day").toDate(),this.endDate=n.clone().endOf("day").toDate();break;case 3:this.startDate=n.clone().subtract(1,"months").startOf("month").toDate(),this.endDate=n.clone().subtract(1,"months").endOf("month").toDate();break;case 4:this.startDate=n.clone().startOf("month").toDate(),this.endDate=n.clone().endOf("month").toDate();break;default:return}this.search()}add(){this._newsService.createNews().subscribe(e=>{this._router.navigate(["/news",e._id])})}}p.\u0275fac=function(e){return new(e||p)(t.Y36(c.gz),t.Y36(t.sBO),t.Y36(c.F0),t.Y36(I.T),t.Y36(d))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-news-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(B,7),2&e){let s;t.iGM(s=t.CRH())&&(n.matDrawer=s.first)}},decls:22,vars:17,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","md:w-160","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex-auto"],[1,"flex","flex-col","sm:flex-row","md:flex-col","flex-auto","justify-between","py-8","px-6","md:px-8"],[1,"flex","gap-6","items-center"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],["mat-flat-button","","color","primary",1,"px-4",3,"click"],["matIconPrefix","","svgIcon","heroicons_outline:plus-circle"],[1,"flex-col"],[4,"ngIf"],["class","flex px-8 py-4 items-center gap-2 border-t hover:cursor-pointer",3,"ngClass","routerLink",4,"ngFor","ngForOf"],[1,"flex","px-8","py-4","items-center","gap-2","border-t","hover:cursor-pointer",3,"ngClass","routerLink"],[1,"text-secondary","text-sm"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"mat-drawer-container",1),t.NdJ("backdropClick",function(){return n.onBackdropClicked()}),t.TgZ(2,"mat-drawer",2,3),t._UZ(4,"router-outlet"),t.qZA(),t.TgZ(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),t._uU(10),t.ALo(11,"capitalize"),t.ALo(12,"transloco"),t.qZA(),t.TgZ(13,"button",9),t.NdJ("click",function(){return n.add()}),t._UZ(14,"mat-icon",10),t.TgZ(15,"span"),t._uU(16),t.ALo(17,"capitalize"),t.ALo(18,"transloco"),t.qZA()()()(),t.TgZ(19,"div",11),t.YNc(20,V,2,1,"ng-container",12),t.ALo(21,"async"),t.qZA()()()()()),2&e&&(t.xp6(2),t.Q6J("mode",n.drawerMode)("opened",!1)("position","end")("disableClose",!0),t.xp6(8),t.hij(" ",t.lcZ(11,7,t.lcZ(12,9,"manage news"))," "),t.xp6(6),t.hij(" ",t.lcZ(17,11,t.lcZ(18,13,"add"))," "),t.xp6(4),t.Q6J("ngIf",t.lcZ(21,15,n.allNews$)))},dependencies:[u.mk,u.sg,u.O5,c.lC,c.rH,N.lW,Z.qo,k.Hw,L.jA,L.kh,L.LW,u.Ov,u.uU,J.e,z.Ot],encapsulation:2,changeDetection:0});var a=i(24006),D=i(99602),M=i(284),W=i(39349),R=i(10266);const Q=function(){return["../"]};class A{constructor(e,n,s,r,l,lt,ct){this._listComponent=e,this._activatedRoute=n,this._changeDetectorRef=s,this._router=r,this._fuseMediaWatcherService=l,this._formBuilder=lt,this._newsService=ct,this._unsubscribeAll=new T.x}closeDrawer(){return this._listComponent.matDrawer.close()}ngOnInit(){this._listComponent.matDrawer.open(),this.form=this._formBuilder.group({_id:["",a.kI.required],__v:[""],time:[""],title:["",a.kI.required],description:["",a.kI.required],data:[""],start:["",a.kI.required],end:["",a.kI.required]}),this._newsService.news$.pipe((0,b.R)(this._unsubscribeAll)).subscribe(e=>{this.news=e,this.form.patchValue(e),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}save(){this.form.invalid||this._newsService.updateNewsById(this.form.getRawValue()).subscribe()}delete(){this._newsService.deleteNewsById(this.news._id).subscribe(()=>{this._router.navigate(["/news"])})}}A.\u0275fac=function(e){return new(e||A)(t.Y36(p),t.Y36(c.gz),t.Y36(t.sBO),t.Y36(c.F0),t.Y36(I.T),t.Y36(a.QS),t.Y36(d))},A.\u0275cmp=t.Xpm({type:A,selectors:[["app-news-detail"]],decls:61,vars:64,consts:[[1,"flex","flex-col","w-full"],[1,"relative","w-full","px-8","sm:px-12","flex","items-center","py-6","justify-end"],["mat-icon-button","",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"border-t","pt-6","px-6"],[3,"formGroup"],["type","hidden","formControlName","_id"],["type","hidden","formControlName","__v"],["type","hidden","formControlName","time"],[1,"fuse-mat-dense","fuse-mat-rounded","w-full",3,"subscriptSizing"],["matInput","","type","text",3,"formControlName","spellcheck"],[1,"w-full","mt-6",3,"subscriptSizing"],["matInput","","type","text","cdkTextareaAutosize","",3,"formControlName","spellcheck"],[1,"fuse-mat-dense","fuse-mat-rounded","w-full","mt-6",3,"subscriptSizing"],["matInput","",3,"formControlName","matDatepicker"],["matIconSuffix","",3,"for"],["start",""],["end",""],[1,"flex","justify-between","px-8","py-8","border-t","mt-6"],[1,"flex","items-center","gap-2"],["mat-button","",3,"routerLink"],["mat-flat-button","",1,"bg-red-500",3,"click"],["mat-flat-button","",1,"bg-lime-500",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"a",2),t._UZ(3,"mat-icon",3),t.qZA()(),t.TgZ(4,"div",4)(5,"form",5),t._UZ(6,"input",6)(7,"input",7)(8,"input",8),t.TgZ(9,"mat-form-field",9)(10,"mat-label"),t._uU(11),t.ALo(12,"capitalize"),t.ALo(13,"transloco"),t.qZA(),t._UZ(14,"input",10),t.qZA(),t.TgZ(15,"mat-form-field",11)(16,"mat-label"),t._uU(17),t.ALo(18,"capitalize"),t.ALo(19,"transloco"),t.qZA(),t.TgZ(20,"textarea",12),t._uU(21,"\n                "),t.qZA()(),t.TgZ(22,"mat-form-field",11)(23,"mat-label"),t._uU(24),t.ALo(25,"capitalize"),t.ALo(26,"transloco"),t.qZA(),t.TgZ(27,"textarea",12),t._uU(28,"\n                "),t.qZA()(),t.TgZ(29,"mat-form-field",13)(30,"mat-label"),t._uU(31),t.ALo(32,"capitalize"),t.ALo(33,"transloco"),t.qZA(),t._UZ(34,"input",14)(35,"mat-datepicker-toggle",15)(36,"mat-datepicker",null,16),t.qZA(),t.TgZ(38,"mat-form-field",13)(39,"mat-label"),t._uU(40),t.ALo(41,"capitalize"),t.ALo(42,"transloco"),t.qZA(),t._UZ(43,"input",14)(44,"mat-datepicker-toggle",15)(45,"mat-datepicker",null,17),t.qZA()()(),t.TgZ(47,"div",18)(48,"div",19)(49,"a",20),t._uU(50),t.ALo(51,"capitalize"),t.ALo(52,"transloco"),t.qZA(),t.TgZ(53,"button",21),t.NdJ("click",function(){return n.delete()}),t._uU(54),t.ALo(55,"capitalize"),t.ALo(56,"transloco"),t.qZA()(),t.TgZ(57,"button",22),t.NdJ("click",function(){return n.save()}),t._uU(58),t.ALo(59,"capitalize"),t.ALo(60,"transloco"),t.qZA()()()),2&e){const s=t.MAs(37),r=t.MAs(46);t.xp6(2),t.Q6J("matTooltip","Close")("routerLink",t.DdM(62,Q)),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x"),t.xp6(2),t.Q6J("formGroup",n.form),t.xp6(4),t.Q6J("subscriptSizing","dynamic"),t.xp6(2),t.hij(" ",t.lcZ(12,30,t.lcZ(13,32,"title"))," "),t.xp6(3),t.Q6J("formControlName","title")("spellcheck",!1),t.xp6(1),t.Q6J("subscriptSizing","dynamic"),t.xp6(2),t.hij(" ",t.lcZ(18,34,t.lcZ(19,36,"description"))," "),t.xp6(3),t.Q6J("formControlName","description")("spellcheck",!1),t.xp6(2),t.Q6J("subscriptSizing","dynamic"),t.xp6(2),t.hij(" ",t.lcZ(25,38,t.lcZ(26,40,"data"))," "),t.xp6(3),t.Q6J("formControlName","data")("spellcheck",!1),t.xp6(2),t.Q6J("subscriptSizing","dynamic"),t.xp6(2),t.hij(" ",t.lcZ(32,42,t.lcZ(33,44,"start date"))," "),t.xp6(3),t.Q6J("formControlName","start")("matDatepicker",s),t.xp6(1),t.Q6J("for",s),t.xp6(3),t.Q6J("subscriptSizing","dynamic"),t.xp6(2),t.hij(" ",t.lcZ(41,46,t.lcZ(42,48,"end date"))," "),t.xp6(3),t.Q6J("formControlName","end")("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(5),t.Q6J("routerLink",t.DdM(63,Q)),t.xp6(1),t.hij(" ",t.lcZ(51,50,t.lcZ(52,52,"cancel"))," "),t.xp6(4),t.hij(" ",t.lcZ(55,54,t.lcZ(56,56,"delete"))," "),t.xp6(4),t.hij(" ",t.lcZ(59,58,t.lcZ(60,60,"save"))," ")}},dependencies:[c.rH,N.zs,N.lW,N.o6,D.Mq,D.hl,D.nW,Z.KE,Z.hX,Z.R9,k.Hw,M.Nt,W.IC,R.gM,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,J.e,z.Ot]});class m{constructor(e){this._newsService=e}resolve(e,n){return this._newsService.getAllNews()}}m.\u0275fac=function(e){return new(e||m)(t.LFG(d))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});class f{constructor(e){this._newsService=e}resolve(e,n){return this._newsService.getNewsById(e.paramMap.get("id"))}}f.\u0275fac=function(e){return new(e||f)(t.LFG(d))},f.\u0275prov=t.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"});class h{canDeactivate(e,n,s,r){let l=r.root;for(;l.firstChild;)l=l.firstChild;return!(r.url.includes("/news")&&!l.paramMap.get("id"))||e.closeDrawer().then(()=>!0)}}h.\u0275fac=function(e){return new(e||h)},h.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"});const X=[{path:"",component:p,resolve:{AllNewsResolver:m},children:[{path:":id",component:A,resolve:{NewsResolver:f},canDeactivate:[h]}]}];class v{}v.\u0275fac=function(e){return new(e||v)},v.\u0275mod=t.oAB({type:v}),v.\u0275inj=t.cJS({imports:[c.Bz.forChild(X),c.Bz]});var K=i(9506),E=i(90811),P=i(56709),q=i(3238),tt=i(44850),et=i(28255),nt=i(73162),it=i(71948),st=i(84385),ot=i(7155),rt=i(20079),at=i(42185);class g{}g.\u0275fac=function(e){return new(e||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[u.ez,v,N.ot,E.vV,P.p9,D.FA,tt.t,Z.lN,k.Ps,M.c,K.En,et.Tx,nt.Cv,it.Fk,q.si,st.LD,L.SJ,ot.p0,R.AV,rt.V,at.m]})}}]);