"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[501],{74501:(ce,T,i)=>{i.r(T),i.d(T,{NewsModule:()=>w});var m=i(36895),c=i(89299),k=i(77579),N=i(82722),U=i(15439),R=i.n(U),e=i(94650),S=i(94880),J=i(61135),Z=i(18505),C=i(95698),L=i(63900),j=i(80529),F=i(65240);class d{constructor(t,n){this._httpClient=t,this._apiService=n,this._allNews=new J.X(null),this._news=new J.X(null)}get allNews$(){return this._allNews.asObservable()}get news$(){return this._news.asObservable()}getAllNews(){return this._httpClient.get(this._apiService.admin_news()).pipe((0,Z.b)(t=>{this._allNews.next(t)}))}getNewsById(t){return this._allNews.pipe((0,C.q)(1),(0,L.w)(n=>this._httpClient.get(this._apiService.admin_news_new(t)).pipe((0,Z.b)(o=>{let a=n.findIndex(l=>l._id==o._id);a>=0?n[a]=o:n.push(o),this._allNews.next(n),this._news.next(o)}))))}updateNewsById(t){return this._allNews.pipe((0,C.q)(1),(0,L.w)(n=>this._httpClient.post(this._apiService.admin_news_new(t._id),t).pipe((0,Z.b)(o=>{let a=n.findIndex(l=>l._id==o._id);a>=0?n[a]=o:n.push(o),this._allNews.next(n),this._news.next(o)}))))}deleteNewsById(t){return this._allNews.pipe((0,C.q)(1),(0,L.w)(n=>this._httpClient.delete(this._apiService.admin_news_new(t)).pipe((0,Z.b)(()=>{let o=n.findIndex(a=>a._id==t);o>=0&&n.splice(o,1),this._allNews.next(n),this._news.next(null)}))))}createNews(){return this._allNews.pipe((0,C.q)(1),(0,L.w)(t=>this._httpClient.post(this._apiService.admin_news(),{}).pipe((0,Z.b)(n=>{t.push(n),this._allNews.next(t),this._news.next(n)}))))}}d.\u0275fac=function(t){return new(t||d)(e.LFG(j.eN),e.LFG(F.s))},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"});var A=i(4859),D=i(90811),p=i(99602),u=i(59549),_=i(97392),y=i(23267),r=i(24006),z=i(63317),M=i(85707);const O=["matDrawer"],B=function(s){return{"bg-card":s}},G=function(s){return["./",s]};function $(s,t){if(1&s&&(e.TgZ(0,"div",30)(1,"div")(2,"div"),e._uU(3),e.ALo(4,"date"),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"div",31),e._uU(7),e.ALo(8,"date"),e.qZA()()()),2&s){const n=t.$implicit,o=e.oxw(3);e.Q6J("ngClass",e.VKq(15,B,o.selected&&o.selected._id==n._id))("routerLink",e.VKq(17,G,n._id)),e.xp6(3),e.lnq(" ",e.xi3(4,6,n.start,"YYYY/MM/dd")," ~ ",e.xi3(5,9,n.end,"YYYY/MM/dd")," - ",n.title," "),e.xp6(4),e.hij(" ",e.xi3(8,12,n.time,"YYYY/MM/dd HH:mm:ss")," ")}}function W(s,t){if(1&s&&(e.ynx(0),e.YNc(1,$,9,19,"div",29),e.BQk()),2&s){const n=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",n)}}function H(s,t){if(1&s&&(e.ynx(0),e.YNc(1,W,2,1,"ng-container",28),e.BQk()),2&s){const n=t.ngIf;e.xp6(1),e.Q6J("ngIf",n.length>0)}}class h{constructor(t,n,o,a,l){this._activatedRoute=t,this._changeDetectorRef=n,this._router=o,this._fuseMediaWatcherService=a,this._newsService=l,this._unsubscribeAll=new k.x}ngOnInit(){this.allNews$=this._newsService.allNews$,this._newsService.allNews$.pipe((0,N.R)(this._unsubscribeAll)).subscribe(t=>{this.selected=null,this._changeDetectorRef.markForCheck()}),this._newsService.news$.pipe((0,N.R)(this._unsubscribeAll)).subscribe(t=>{this.selected=t,this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,N.R)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{this.drawerMode=t.includes("lg")?"side":"over",this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}search(){}onTimeChange(t){let n=R()();switch(parseInt(t.value)){case 1:this.startDate=n.clone().subtract(1,"days").startOf("day").toDate(),this.endDate=n.clone().subtract(1,"days").endOf("day").toDate();break;case 2:this.startDate=n.clone().startOf("day").toDate(),this.endDate=n.clone().endOf("day").toDate();break;case 3:this.startDate=n.clone().subtract(1,"months").startOf("month").toDate(),this.endDate=n.clone().subtract(1,"months").endOf("month").toDate();break;case 4:this.startDate=n.clone().startOf("month").toDate(),this.endDate=n.clone().endOf("month").toDate();break;default:return}this.search()}add(){this._newsService.createNews().subscribe(t=>{this._router.navigate(["./",t._id])})}}h.\u0275fac=function(t){return new(t||h)(e.Y36(c.gz),e.Y36(e.sBO),e.Y36(c.F0),e.Y36(S.T),e.Y36(d))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-news-list"]],viewQuery:function(t,n){if(1&t&&e.Gf(O,7),2&t){let o;e.iGM(o=e.CRH())&&(n.matDrawer=o.first)}},decls:62,vars:56,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","md:w-160","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex-auto"],[1,"flex","flex-col","sm:flex-row","md:flex-col","flex-auto","justify-between","py-8","px-6","md:px-8"],[1,"flex","gap-6","items-center"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],["mat-flat-button","","color","primary",1,"px-4",3,"click"],["matIconPrefix","","svgIcon","heroicons_outline:plus-circle"],[1,"flex","items-center","mt-4","sm:mt-0","md:mt-4"],[1,"flex","gap-4"],[3,"change"],["value","1"],[1,"text-sm","md:text-md"],["value","2"],["value","3"],["value","4"],["subscriptSizing","dynamic",1,"fuse-mat-dense","fuse-mat-rounded","md:min-w-64"],[3,"rangePicker"],["disabled","","matStartDate","",1,"w-full",3,"ngModel","placeholder","ngModelChange"],["disabled","","matEndDate","",1,"w-full",3,"ngModel","placeholder","ngModelChange"],["matIconSuffix","",3,"for"],["disabled","false"],["picker",""],["matIconPrefix","","svgIcon","heroicons_outline:search"],[1,"flex-col"],[4,"ngIf"],["class","flex px-8 py-4 items-center gap-2 border-t hover:cursor-pointer",3,"ngClass","routerLink",4,"ngFor","ngForOf"],[1,"flex","px-8","py-4","items-center","gap-2","border-t","hover:cursor-pointer",3,"ngClass","routerLink"],[1,"text-secondary","text-sm"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"mat-drawer-container",1),e.NdJ("backdropClick",function(){return n.onBackdropClicked()}),e.TgZ(2,"mat-drawer",2,3),e._UZ(4,"router-outlet"),e.qZA(),e.TgZ(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),e._uU(10),e.ALo(11,"capitalize"),e.ALo(12,"transloco"),e.qZA(),e.TgZ(13,"button",9),e.NdJ("click",function(){return n.add()}),e._UZ(14,"mat-icon",10),e.TgZ(15,"span"),e._uU(16),e.ALo(17,"capitalize"),e.ALo(18,"transloco"),e.qZA()()(),e.TgZ(19,"div",11)(20,"div",12)(21,"mat-button-toggle-group",13),e.NdJ("change",function(a){return n.onTimeChange(a)}),e.TgZ(22,"mat-button-toggle",14)(23,"span",15),e._uU(24),e.ALo(25,"capitalize"),e.ALo(26,"transloco"),e.qZA()(),e.TgZ(27,"mat-button-toggle",16)(28,"span",15),e._uU(29),e.ALo(30,"capitalize"),e.ALo(31,"transloco"),e.qZA()(),e.TgZ(32,"mat-button-toggle",17)(33,"span",15),e._uU(34),e.ALo(35,"capitalize"),e.ALo(36,"transloco"),e.qZA()(),e.TgZ(37,"mat-button-toggle",18)(38,"span",15),e._uU(39),e.ALo(40,"capitalize"),e.ALo(41,"transloco"),e.qZA()()(),e.TgZ(42,"mat-form-field",19)(43,"mat-date-range-input",20)(44,"input",21),e.NdJ("ngModelChange",function(a){return n.startDate=a}),e.ALo(45,"capitalize"),e.ALo(46,"transloco"),e.qZA(),e.TgZ(47,"input",22),e.NdJ("ngModelChange",function(a){return n.endDate=a}),e.ALo(48,"capitalize"),e.ALo(49,"transloco"),e.qZA()(),e._UZ(50,"mat-datepicker-toggle",23)(51,"mat-date-range-picker",24,25),e.qZA(),e.TgZ(53,"button",9),e.NdJ("click",function(){return n.search()}),e._UZ(54,"mat-icon",26),e.TgZ(55,"span"),e._uU(56),e.ALo(57,"capitalize"),e.ALo(58,"transloco"),e.qZA()()()()(),e.TgZ(59,"div",27),e.YNc(60,H,2,1,"ng-container",28),e.ALo(61,"async"),e.qZA()()()()()),2&t){const o=e.MAs(52);e.xp6(2),e.Q6J("mode",n.drawerMode)("opened",!1)("position","end")("disableClose",!0),e.xp6(8),e.hij(" ",e.lcZ(11,18,e.lcZ(12,20,"manage news"))," "),e.xp6(6),e.hij(" ",e.lcZ(17,22,e.lcZ(18,24,"add"))," "),e.xp6(8),e.hij(" ",e.lcZ(25,26,e.lcZ(26,28,"yesterday"))," "),e.xp6(5),e.hij(" ",e.lcZ(30,30,e.lcZ(31,32,"today"))," "),e.xp6(5),e.hij(" ",e.lcZ(35,34,e.lcZ(36,36,"last month"))," "),e.xp6(5),e.hij(" ",e.lcZ(40,38,e.lcZ(41,40,"this month"))," "),e.xp6(4),e.Q6J("rangePicker",o),e.xp6(1),e.Q6J("ngModel",n.startDate)("placeholder",e.lcZ(45,42,e.lcZ(46,44,"select date"))),e.xp6(3),e.Q6J("ngModel",n.endDate)("placeholder",e.lcZ(48,46,e.lcZ(49,48,"select date"))),e.xp6(3),e.Q6J("for",o),e.xp6(6),e.hij(" ",e.lcZ(57,50,e.lcZ(58,52,"search"))," "),e.xp6(4),e.Q6J("ngIf",e.lcZ(61,54,n.allNews$))}},dependencies:[m.mk,m.sg,m.O5,c.lC,c.rH,A.lW,D.A9,D.Yi,p.nW,p.wx,p.zY,p.By,p._g,u.KE,u.qo,u.R9,_.Hw,y.jA,y.kh,y.LW,r.Fj,r.JJ,r.On,m.Ov,m.uU,z.e,M.Ot],encapsulation:2,changeDetection:0});var I=i(284),V=i(39349),Y=i(10266);const Q=function(){return["../"]};class b{constructor(t,n,o,a,l,re,le){this._listComponent=t,this._activatedRoute=n,this._changeDetectorRef=o,this._router=a,this._fuseMediaWatcherService=l,this._formBuilder=re,this._newsService=le,this._unsubscribeAll=new k.x}closeDrawer(){return this._listComponent.matDrawer.close()}ngOnInit(){this._listComponent.matDrawer.open(),this.form=this._formBuilder.group({_id:["",r.kI.required],__v:[""],time:[""],title:["",r.kI.required],description:["",r.kI.required],data:[""],start:["",r.kI.required],end:["",r.kI.required]}),this._newsService.news$.pipe((0,N.R)(this._unsubscribeAll)).subscribe(t=>{this.news=t,this.form.reset(),this.form.patchValue(t),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}save(){this.form.invalid||this._newsService.updateNewsById(this.form.getRawValue()).subscribe()}delete(){this._newsService.deleteNewsById(this.news._id).subscribe(()=>{this._router.navigate(["../"])})}}b.\u0275fac=function(t){return new(t||b)(e.Y36(h),e.Y36(c.gz),e.Y36(e.sBO),e.Y36(c.F0),e.Y36(S.T),e.Y36(r.QS),e.Y36(d))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-news-detail"]],decls:61,vars:64,consts:[[1,"flex","flex-col","w-full"],[1,"relative","w-full","px-8","sm:px-12","flex","items-center","py-6","justify-end"],["mat-icon-button","",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"border-t","pt-6","px-6"],[3,"formGroup"],["type","hidden","formControlName","_id"],["type","hidden","formControlName","__v"],["type","hidden","formControlName","time"],[1,"fuse-mat-dense","fuse-mat-rounded","w-full",3,"subscriptSizing"],["matInput","","type","text",3,"formControlName","spellcheck"],[1,"w-full","mt-6",3,"subscriptSizing"],["matInput","","type","text","cdkTextareaAutosize","",3,"formControlName","spellcheck"],[1,"fuse-mat-dense","fuse-mat-rounded","w-full","mt-6",3,"subscriptSizing"],["matInput","",3,"formControlName","matDatepicker"],["matIconSuffix","",3,"for"],["start",""],["end",""],[1,"flex","justify-between","px-8","py-8","border-t","mt-6"],[1,"flex","items-center","gap-2"],["mat-button","",3,"routerLink"],["mat-flat-button","",1,"bg-red-500",3,"click"],["mat-flat-button","",1,"bg-lime-500",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"a",2),e._UZ(3,"mat-icon",3),e.qZA()(),e.TgZ(4,"div",4)(5,"form",5),e._UZ(6,"input",6)(7,"input",7)(8,"input",8),e.TgZ(9,"mat-form-field",9)(10,"mat-label"),e._uU(11),e.ALo(12,"capitalize"),e.ALo(13,"transloco"),e.qZA(),e._UZ(14,"input",10),e.qZA(),e.TgZ(15,"mat-form-field",11)(16,"mat-label"),e._uU(17),e.ALo(18,"capitalize"),e.ALo(19,"transloco"),e.qZA(),e.TgZ(20,"textarea",12),e._uU(21,"\n                "),e.qZA()(),e.TgZ(22,"mat-form-field",11)(23,"mat-label"),e._uU(24),e.ALo(25,"capitalize"),e.ALo(26,"transloco"),e.qZA(),e.TgZ(27,"textarea",12),e._uU(28,"\n                "),e.qZA()(),e.TgZ(29,"mat-form-field",13)(30,"mat-label"),e._uU(31),e.ALo(32,"capitalize"),e.ALo(33,"transloco"),e.qZA(),e._UZ(34,"input",14)(35,"mat-datepicker-toggle",15)(36,"mat-datepicker",null,16),e.qZA(),e.TgZ(38,"mat-form-field",13)(39,"mat-label"),e._uU(40),e.ALo(41,"capitalize"),e.ALo(42,"transloco"),e.qZA(),e._UZ(43,"input",14)(44,"mat-datepicker-toggle",15)(45,"mat-datepicker",null,17),e.qZA()()(),e.TgZ(47,"div",18)(48,"div",19)(49,"a",20),e._uU(50),e.ALo(51,"capitalize"),e.ALo(52,"transloco"),e.qZA(),e.TgZ(53,"button",21),e.NdJ("click",function(){return n.delete()}),e._uU(54),e.ALo(55,"capitalize"),e.ALo(56,"transloco"),e.qZA()(),e.TgZ(57,"button",22),e.NdJ("click",function(){return n.save()}),e._uU(58),e.ALo(59,"capitalize"),e.ALo(60,"transloco"),e.qZA()()()),2&t){const o=e.MAs(37),a=e.MAs(46);e.xp6(2),e.Q6J("matTooltip","Close")("routerLink",e.DdM(62,Q)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("subscriptSizing","dynamic"),e.xp6(2),e.hij(" ",e.lcZ(12,30,e.lcZ(13,32,"title"))," "),e.xp6(3),e.Q6J("formControlName","title")("spellcheck",!1),e.xp6(1),e.Q6J("subscriptSizing","dynamic"),e.xp6(2),e.hij(" ",e.lcZ(18,34,e.lcZ(19,36,"description"))," "),e.xp6(3),e.Q6J("formControlName","description")("spellcheck",!1),e.xp6(2),e.Q6J("subscriptSizing","dynamic"),e.xp6(2),e.hij(" ",e.lcZ(25,38,e.lcZ(26,40,"data"))," "),e.xp6(3),e.Q6J("formControlName","data")("spellcheck",!1),e.xp6(2),e.Q6J("subscriptSizing","dynamic"),e.xp6(2),e.hij(" ",e.lcZ(32,42,e.lcZ(33,44,"start date"))," "),e.xp6(3),e.Q6J("formControlName","start")("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(3),e.Q6J("subscriptSizing","dynamic"),e.xp6(2),e.hij(" ",e.lcZ(41,46,e.lcZ(42,48,"end date"))," "),e.xp6(3),e.Q6J("formControlName","end")("matDatepicker",a),e.xp6(1),e.Q6J("for",a),e.xp6(5),e.Q6J("routerLink",e.DdM(63,Q)),e.xp6(1),e.hij(" ",e.lcZ(51,50,e.lcZ(52,52,"cancel"))," "),e.xp6(4),e.hij(" ",e.lcZ(55,54,e.lcZ(56,56,"delete"))," "),e.xp6(4),e.hij(" ",e.lcZ(59,58,e.lcZ(60,60,"save"))," ")}},dependencies:[c.rH,A.zs,A.lW,A.o6,p.Mq,p.hl,p.nW,u.KE,u.hX,u.R9,_.Hw,I.Nt,V.IC,Y.gM,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,z.e,M.Ot]});class f{constructor(t){this._newsService=t}resolve(t,n){return this._newsService.getAllNews()}}f.\u0275fac=function(t){return new(t||f)(e.LFG(d))},f.\u0275prov=e.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"});class g{constructor(t){this._newsService=t}resolve(t,n){return this._newsService.getNewsById(t.paramMap.get("id"))}}g.\u0275fac=function(t){return new(t||g)(e.LFG(d))},g.\u0275prov=e.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"});class v{canDeactivate(t,n,o,a){let l=a.root;for(;l.firstChild;)l=l.firstChild;return!(a.url.includes("/news")&&!l.paramMap.get("id"))||t.closeDrawer().then(()=>!0)}}v.\u0275fac=function(t){return new(t||v)},v.\u0275prov=e.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"});const P=[{path:"",component:h,resolve:{AllNewsResolver:f},children:[{path:":id",component:b,resolve:{NewsResolver:g},canDeactivate:[v]}]}];class x{}x.\u0275fac=function(t){return new(t||x)},x.\u0275mod=e.oAB({type:x}),x.\u0275inj=e.cJS({imports:[c.Bz.forChild(P),c.Bz]});var X=i(9506),q=i(56709),E=i(3238),K=i(44850),ee=i(28255),te=i(73162),ne=i(71948),ie=i(84385),oe=i(7155),se=i(20079),ae=i(42185);class w{}w.\u0275fac=function(t){return new(t||w)},w.\u0275mod=e.oAB({type:w}),w.\u0275inj=e.cJS({imports:[m.ez,x,A.ot,D.vV,q.p9,p.FA,K.t,u.lN,_.Ps,I.c,X.En,ee.Tx,te.Cv,ne.Fk,E.si,ie.LD,y.SJ,oe.p0,Y.AV,se.V,ae.m]})}}]);