"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[43],{5043:(lt,D,s)=>{s.r(D),s.d(D,{WalletModule:()=>h});var l=s(6895),a=s(9299),I=s(7579),w=s(2722),t=s(4650),M=s(1135),y=s(5698),Z=s(3900),v=s(8505),p=(()=>{return(n=p||(p={}))[n.PENDING=0]="PENDING",n[n.SUCCESS=1]="SUCCESS",n[n.CANCELED=2]="CANCELED",p;var n})(),U=s(529),E=s(5240);class d{constructor(e,i){this._httpClient=e,this._apiService=i,this._depositOrder=new M.X(null),this._depositOrders=new M.X(null)}get depositOrder$(){return this._depositOrder.asObservable()}get depositOrders$(){return this._depositOrders.asObservable()}createOrder(){return this._depositOrders.pipe((0,y.q)(1),(0,Z.w)(e=>this._httpClient.post(this._apiService.users_wallet_depositOrders(),{}).pipe((0,v.b)(i=>{let o=e.findIndex(r=>r._id==i._id);o>=0?e[o]=i:e.push(i),e=e.sort((r,c)=>new Date(c.time).getTime()-new Date(r.time).getTime()),this._depositOrders.next(e),this._depositOrder.next(i)}))))}getDepositOrders(e=0,i=10,o={time:-1}){return this._httpClient.get(this._apiService.users_wallet_depositOrders(e,i,o)).pipe((0,v.b)(r=>{this._depositOrders.next(r)}))}getDepositOrder(e){return this._httpClient.get(this._apiService.users_wallet_depositOrders_depositOrder(e)).pipe((0,v.b)(i=>{this._depositOrder.next(i)}))}cancel(e){return e.flag=p.CANCELED,this._depositOrders.pipe((0,y.q)(1),(0,Z.w)(i=>this._httpClient.patch(this._apiService.users_wallet_depositOrders_depositOrder(e._id),e).pipe((0,v.b)(o=>{let r=i.findIndex(c=>c._id==o._id);r>=0?i[r]=o:i.push(o),i=i.sort((c,b)=>new Date(b.time).getTime()-new Date(c.time).getTime()),this._depositOrders.next(i),this._depositOrder.next(o)}))))}checkTransaction(e){return this._depositOrders.pipe((0,y.q)(1),(0,Z.w)(i=>this._httpClient.post(this._apiService.users_wallets_checkTransaction(),{transactionId:e}).pipe((0,v.b)(o=>{let r=i.findIndex(c=>c._id==o._id);r>=0?i[r]=o:i.push(o),i=i.sort((c,b)=>new Date(b.time).getTime()-new Date(c.time).getTime()),this._depositOrders.next(i),this._depositOrder.next(o)}))))}}d.\u0275fac=function(e){return new(e||d)(t.LFG(U.eN),t.LFG(E.s))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"});var F=s(900),_=s(4859),T=s(9549),A=s(7392),S=s(4144),O=s(4006),L=s(9885),N=s(3317),k=s(5707);function J(n,e){1&n&&(t.TgZ(0,"div"),t._UZ(1,"div",29)(2,"div",30),t.qZA())}function z(n,e){1&n&&(t.TgZ(0,"div"),t._UZ(1,"div",31),t.qZA())}function Y(n,e){1&n&&(t.TgZ(0,"div"),t._UZ(1,"div",32),t.qZA())}const j=function(n){return[n]};function R(n,e){if(1&n&&(t.TgZ(0,"div",27)(1,"div")(2,"div"),t._uU(3),t.qZA(),t.TgZ(4,"div",28),t._uU(5),t.ALo(6,"date"),t.qZA()(),t.YNc(7,J,3,0,"div",17),t.YNc(8,z,2,0,"div",17),t.YNc(9,Y,2,0,"div",17),t.qZA()),2&n){const i=e.$implicit;t.Q6J("routerLink",t.VKq(9,j,"/wallet/deposit/"+i._id)),t.xp6(3),t.Oqu(i._id),t.xp6(2),t.Oqu(t.xi3(6,6,i.time,"YYYY/MM/dd HH:mm:ss")),t.xp6(2),t.Q6J("ngIf",0==i.flag),t.xp6(1),t.Q6J("ngIf",1==i.flag),t.xp6(1),t.Q6J("ngIf",2==i.flag)}}function P(n,e){if(1&n&&(t.ynx(0),t.YNc(1,R,10,11,"div",26),t.BQk()),2&n){const i=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",i)}}function q(n,e){}function G(n,e){if(1&n){const i=t.EpF();t.ynx(0),t.TgZ(1,"div",19)(2,"div",20)(3,"button",21),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.prevPage())}),t._UZ(4,"mat-icon",22),t.qZA(),t.TgZ(5,"button",21),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.nextPage())}),t._UZ(6,"mat-icon",23),t.qZA()(),t.YNc(7,P,2,1,"ng-container",24),t.YNc(8,q,0,0,"ng-template",null,25,t.W1O),t.qZA(),t.BQk()}if(2&n){const i=e.ngIf,o=t.MAs(9);t.xp6(7),t.Q6J("ngIf",i.length>0)("ngIfElse",o)}}class C{constructor(e,i,o){this._depositService=e,this._router=i,this._appService=o,this.apiCalling=!1,this.transactionId="",this.offset=0,this.size=10,this._unsubscribeAll=new I.x}ngOnInit(){this.depositOrders$=this._depositService.depositOrders$,this._appService.appConfig$.pipe((0,w.R)(this._unsubscribeAll)).subscribe(e=>{this.appConfig=e})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createOrder(){this.apiCalling=!0,this._depositService.createOrder().subscribe(e=>{this._router.navigate(["/wallet/deposit/"+e._id])},e=>{},()=>{this.apiCalling=!1})}nextPage(){this.offset+=this.size,this._depositService.getDepositOrders(this.offset,this.size).subscribe(e=>{e.length||(this.offset=0)},e=>{this.offset=0})}prevPage(){this.offset-=this.size,this.offset=this.offset<0?0:this.offset,this._depositService.getDepositOrders(this.offset,this.size).subscribe(e=>{e.length||(this.offset=0)},e=>{this.offset=0})}checkTransaction(){this._depositService.checkTransaction(this.transactionId).subscribe()}}C.\u0275fac=function(e){return new(e||C)(t.Y36(d),t.Y36(a.F0),t.Y36(F.z))},C.\u0275cmp=t.Xpm({type:C,selectors:[["app-deposit"]],decls:36,vars:28,consts:[[1,"w-full","h-full","md:p-6"],[1,"w-full","h-full","md:rounded-lg","bg-card","dark:bg-slate-700","p-4"],[1,"md:flex","w-full","my-2"],[1,"font-semibold"],[1,"w-full","bg-slate-500","rounded-md","drop-shadow-md","p-2","truncate","flex","flex-auto","justify-between","items-center"],[1,"truncate"],["mat-icon-button",""],["svgIcon","heroicons_outline:clipboard-copy"],[1,"relative","rounded-md","mx-auto","md:ml-2","mt-2","md:mt-3"],[3,"qrdata","width","errorCorrectionLevel"],[1,"flex","flex-auto","items-center","gap-6"],[1,"w-full"],["matInput","","type","text",3,"ngModel","ngModelChange"],["mat-flat-button","",1,"rounded-md","w-full","md:w-fit","bg-lime-500",3,"click"],["svgIcon","heroicons_outline:check-circle"],[1,"text-secondary","truncate"],[1,"md:flex","md:flex-auto","w-full","md:p-4","rounded-lg","gap-6"],[4,"ngIf"],[1,"w-full","md:px-6"],[1,"w-full","h-fit","grid","py-2","md:p-2","border-t","mt-6","md:mt-0","md:border-t-0","grid-cols-1","gap-4"],[1,"flex","flex-auto","justify-end","gap-4"],["mat-icon-button","",3,"click"],["svgIcon","heroicons_outline:chevron-left"],["svgIcon","heroicons_outline:chevron-right"],[4,"ngIf","ngIfElse"],["noResult",""],["class","flex flex-auto items-center justify-between rounded-md bg-card dark:bg-default p-4 gap-6 hover:cursor-pointer transition duration-150 hover:translate-x-2","routerLinkActive","router-link-active",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","router-link-active",1,"flex","flex-auto","items-center","justify-between","rounded-md","bg-card","dark:bg-default","p-4","gap-6","hover:cursor-pointer","transition","duration-150","hover:translate-x-2",3,"routerLink"],[1,"text-sm","text-secondary"],[1,"absolute","icon-size-3","rounded-md","bg-amber-500","animate-ping"],[1,"icon-size-3","rounded-md","bg-amber-500"],[1,"icon-size-3","rounded-md","bg-lime-500"],[1,"icon-size-3","rounded-md","bg-red-500"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),t._uU(5),t.ALo(6,"capitalize"),t.ALo(7,"transloco"),t.qZA(),t.TgZ(8,"div",4)(9,"span",5),t._uU(10),t.qZA(),t.TgZ(11,"button",6),t._UZ(12,"mat-icon",7),t.qZA()()(),t.TgZ(13,"div",8),t._UZ(14,"qrcode",9),t.qZA()(),t.TgZ(15,"div",10)(16,"mat-form-field",11)(17,"mat-label"),t._uU(18),t.ALo(19,"capitalize"),t.ALo(20,"transloco"),t.qZA(),t.TgZ(21,"input",12),t.NdJ("ngModelChange",function(r){return i.transactionId=r}),t.qZA()(),t.TgZ(22,"button",13),t.NdJ("click",function(){return i.checkTransaction()}),t._UZ(23,"mat-icon",14),t._uU(24),t.ALo(25,"capitalize"),t.ALo(26,"transloco"),t.qZA()(),t.TgZ(27,"div",15),t._uU(28),t.ALo(29,"capitalize"),t.ALo(30,"transloco"),t.qZA(),t.TgZ(31,"div",16),t.YNc(32,G,10,2,"ng-container",17),t.ALo(33,"async"),t.TgZ(34,"div",18),t._UZ(35,"router-outlet"),t.qZA()()()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,10,t.lcZ(7,12,"wallet address"))),t.xp6(5),t.Oqu(i.appConfig.MASTER_ADDRESS),t.xp6(4),t.Q6J("qrdata",i.appConfig.MASTER_ADDRESS)("width",64)("errorCorrectionLevel","M"),t.xp6(4),t.hij(" ",t.lcZ(19,14,t.lcZ(20,16,"transaction identity"))," "),t.xp6(3),t.Q6J("ngModel",i.transactionId),t.xp6(3),t.hij(" ",t.lcZ(25,18,t.lcZ(26,20,"check"))," "),t.xp6(4),t.hij(" ",t.lcZ(29,22,t.lcZ(30,24,"transaction hash hint"))," "),t.xp6(4),t.Q6J("ngIf",t.lcZ(33,26,i.depositOrders$)))},dependencies:[l.sg,l.O5,a.lC,a.rH,a.Od,_.lW,_.RK,T.KE,T.hX,A.Hw,S.Nt,O.Fj,O.JJ,O.On,L.V,l.Ov,l.uU,N.e,k.Ot]});class Q{constructor(e,i){this._document=i;const o=this._textarea=this._document.createElement("textarea"),r=o.style;r.position="fixed",r.top=r.opacity="0",r.left="-999em",o.setAttribute("aria-hidden","true"),o.value=e,o.readOnly=!0,this._document.body.appendChild(o)}copy(){const e=this._textarea;let i=!1;try{if(e){const o=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),i=this._document.execCommand("copy"),o&&o.focus()}}catch{}return i}destroy(){const e=this._textarea;e&&(e.remove(),this._textarea=void 0)}}let B=(()=>{class n{constructor(i){this._document=i}copy(i){const o=this.beginCopy(i),r=o.copy();return o.destroy(),r}beginCopy(i){return new Q(i,this._document)}}return n.\u0275fac=function(i){return new(i||n)(t.LFG(l.K0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function K(n,e){if(1&n){const i=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(i);const r=t.oxw(2);return t.KtG(r.cancel())}),t._uU(1),t.ALo(2,"capitalize"),t.ALo(3,"transloco"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,t.lcZ(3,3,"cancel"))," "))}function H(n,e){if(1&n){const i=t.EpF();t.ynx(0),t.TgZ(1,"div",2),t.YNc(2,K,4,5,"button",3),t.qZA(),t.TgZ(3,"div",4)(4,"div",5),t._uU(5),t.ALo(6,"capitalize"),t.ALo(7,"transloco"),t.qZA(),t.TgZ(8,"div",6)(9,"span",7),t._uU(10),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.copyAddress())}),t._UZ(12,"mat-icon",9),t.qZA()()(),t.TgZ(13,"div",10)(14,"div",5),t._uU(15),t.ALo(16,"capitalize"),t.ALo(17,"transloco"),t.qZA(),t.TgZ(18,"div",6)(19,"span",7),t._uU(20),t.qZA(),t.TgZ(21,"button",8),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.copyMessage())}),t._UZ(22,"mat-icon",9),t.qZA()()(),t.TgZ(23,"div",11),t._UZ(24,"qrcode",12),t.qZA(),t.BQk()}if(2&n){const i=t.oxw();t.xp6(2),t.Q6J("ngIf",i.depositOrder.flag==i.DepositOrderStatus.PENDING),t.xp6(3),t.Oqu(t.lcZ(6,8,t.lcZ(7,10,"wallet address"))),t.xp6(5),t.Oqu(i.depositOrder.masterAddress),t.xp6(5),t.Oqu(t.lcZ(16,12,t.lcZ(17,14,"message"))),t.xp6(5),t.Oqu(i.depositOrder._id),t.xp6(4),t.Q6J("qrdata",i.depositOrder.masterAddress)("width",256)("errorCorrectionLevel","M")}}class u{constructor(e,i){this._depositService=e,this._clipboard=i,this.DepositOrderStatus=p,this.apiCalling=!1,this._unsubscribeAll=new I.x}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}ngOnInit(){this.depositOrders$=this._depositService.depositOrders$,this._depositService.depositOrder$.pipe((0,w.R)(this._unsubscribeAll)).subscribe(e=>this.depositOrder=e)}copyAddress(){this._clipboard.copy(this.depositOrder.masterAddress)}copyMessage(){this._clipboard.copy(this.depositOrder._id)}cancel(){this.depositOrder.flag=p.CANCELED,this.apiCalling=!0,this._depositService.cancel(this.depositOrder).subscribe(e=>{this.depositOrder=e},e=>{},()=>{this.apiCalling=!1})}}u.\u0275fac=function(e){return new(e||u)(t.Y36(d),t.Y36(B))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-deposit-order"]],decls:2,vars:1,consts:[[1,"w-full","md:px-6"],[4,"ngIf"],[1,"w-full","mb-2","flex","justify-end"],["mat-flat-button","","class","w-full md:max-w-24 rounded-md bg-red-500",3,"click",4,"ngIf"],[1,"w-full","my-2"],[1,"font-semibold"],[1,"w-full","bg-slate-500","rounded-md","drop-shadow-md","p-2","truncate","flex","flex-auto","justify-between","items-center"],[1,"truncate"],["mat-icon-button","",3,"click"],["svgIcon","heroicons_outline:clipboard-copy"],[1,"w-full","my-4"],[1,"w-full","my-2","flex","flex-auto","justify-center"],[1,"rounded-md",3,"qrdata","width","errorCorrectionLevel"],["mat-flat-button","",1,"w-full","md:max-w-24","rounded-md","bg-red-500",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,H,25,16,"ng-container",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.depositOrder))},dependencies:[l.O5,_.lW,_.RK,A.Hw,L.V,N.e,k.Ot]});class f{constructor(e){this._depositService=e}resolve(e,i){return this._depositService.getDepositOrders()}}f.\u0275fac=function(e){return new(e||f)(t.LFG(d))},f.\u0275prov=t.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"});class m{constructor(e){this._depositService=e}resolve(e,i){return this._depositService.getDepositOrder(e.paramMap.get("depositOrderId"))}}m.\u0275fac=function(e){return new(e||m)(t.LFG(d))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});class x{}x.\u0275fac=function(e){return new(e||x)},x.\u0275cmp=t.Xpm({type:x,selectors:[["app-wallet"]],decls:2,vars:0,template:function(e,i){1&e&&(t.TgZ(0,"p"),t._uU(1,"wallet works!"),t.qZA())}});const W=[{path:"",component:x},{path:"deposit",component:C,resolve:{DepositOrdersResolver:f},children:[{path:"",component:u},{path:":depositOrderId",component:u,resolve:{DepositOrderResolver:m}}]}];class g{}g.\u0275fac=function(e){return new(e||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[a.Bz.forChild(W),a.Bz]});var $=s(4466),X=s(811),V=s(8255),tt=s(1572),et=s(4385),it=s(3267),nt=s(7314),ot=s(6308),st=s(7155),rt=s(3848),ct=s(7775),dt=s(6236);class h{}h.\u0275fac=function(e){return new(e||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({imports:[l.ez,g,_.ot,X.vV,T.lN,A.Ps,S.c,V.Tx,et.LD,it.SJ,ot.JX,st.p0,rt.Nh,nt.KP,tt.Cq,dt.J,ct.fC,$.m]})}}]);