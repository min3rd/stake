"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[709],{2709:(dt,Z,n)=>{n.r(Z),n.d(Z,{WalletModule:()=>m});var c=n(6895),l=n(9299),t=n(4650),O=n(1135),T=n(5698),A=n(3900),C=n(8505),a=(()=>{return(i=a||(a={}))[i.PENDING=0]="PENDING",i[i.SUCCESS=1]="SUCCESS",i[i.CANCELED=2]="CANCELED",a;var i})(),L=n(529),N=n(5240);class d{constructor(e,o){this._httpClient=e,this._apiService=o,this._depositOrder=new O.X(null),this._depositOrders=new O.X(null)}get depositOrder$(){return this._depositOrder.asObservable()}get depositOrders$(){return this._depositOrders.asObservable()}createOrder(){return this._depositOrders.pipe((0,T.q)(1),(0,A.w)(e=>this._httpClient.post(this._apiService.users_wallet_depositOrders(),{}).pipe((0,C.b)(o=>{let s=e.findIndex(r=>r._id==o._id);s>=0?e[s]=o:e.push(o),e=e.sort((r,h)=>new Date(h.time).getTime()-new Date(r.time).getTime()),this._depositOrders.next(e),this._depositOrder.next(o)}))))}getDepositOrders(e=0,o=10,s={time:-1}){return this._httpClient.get(this._apiService.users_wallet_depositOrders(e,o,s)).pipe((0,C.b)(r=>{this._depositOrders.next(r)}))}getDepositOrder(e){return this._httpClient.get(this._apiService.users_wallet_depositOrders_depositOrder(e)).pipe((0,C.b)(o=>{this._depositOrder.next(o)}))}cancel(e){return e.flag=a.CANCELED,this._depositOrders.pipe((0,T.q)(1),(0,A.w)(o=>this._httpClient.patch(this._apiService.users_wallet_depositOrders_depositOrder(e._id),e).pipe((0,C.b)(s=>{let r=o.findIndex(h=>h._id==s._id);r>=0?o[r]=s:o.push(s),o=o.sort((h,M)=>new Date(M.time).getTime()-new Date(h.time).getTime()),this._depositOrders.next(o),this._depositOrder.next(s)}))))}}d.\u0275fac=function(e){return new(e||d)(t.LFG(L.eN),t.LFG(N.s))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"});var v=n(4859),x=n(9549),b=n(7392),D=n(4144),y=n(4006),I=n(3317),w=n(5707);function S(i,e){1&i&&(t.TgZ(0,"div"),t._UZ(1,"div",27)(2,"div",28),t.qZA())}function k(i,e){1&i&&(t.TgZ(0,"div"),t._UZ(1,"div",29),t.qZA())}function U(i,e){1&i&&(t.TgZ(0,"div"),t._UZ(1,"div",30),t.qZA())}const F=function(i){return[i]};function J(i,e){if(1&i&&(t.TgZ(0,"div",25)(1,"div")(2,"div"),t._uU(3),t.qZA(),t.TgZ(4,"div",26),t._uU(5),t.ALo(6,"date"),t.qZA()(),t.YNc(7,S,3,0,"div",16),t.YNc(8,k,2,0,"div",16),t.YNc(9,U,2,0,"div",16),t.qZA()),2&i){const o=e.$implicit;t.Q6J("routerLink",t.VKq(9,F,"/wallet/deposit/"+o._id)),t.xp6(3),t.Oqu(o._id),t.xp6(2),t.Oqu(t.xi3(6,6,o.time,"YYYY/MM/dd HH:mm:ss")),t.xp6(2),t.Q6J("ngIf",0==o.flag),t.xp6(1),t.Q6J("ngIf",1==o.flag),t.xp6(1),t.Q6J("ngIf",2==o.flag)}}function z(i,e){if(1&i&&(t.ynx(0),t.YNc(1,J,10,11,"div",24),t.BQk()),2&i){const o=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",o)}}function E(i,e){}function Y(i,e){if(1&i){const o=t.EpF();t.ynx(0),t.TgZ(1,"div",17)(2,"div",18)(3,"button",19),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.prevPage())}),t._UZ(4,"mat-icon",20),t.qZA(),t.TgZ(5,"button",19),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.nextPage())}),t._UZ(6,"mat-icon",21),t.qZA()(),t.YNc(7,z,2,1,"ng-container",22),t.YNc(8,E,0,0,"ng-template",null,23,t.W1O),t.qZA(),t.BQk()}if(2&i){const o=e.ngIf,s=t.MAs(9);t.xp6(7),t.Q6J("ngIf",o.length>0)("ngIfElse",s)}}class _{constructor(e,o){this._depositService=e,this._router=o,this.apiCalling=!1,this.transactionId="",this.offset=0,this.size=10}ngOnInit(){this.depositOrders$=this._depositService.depositOrders$}createOrder(){this.apiCalling=!0,this._depositService.createOrder().subscribe(e=>{this._router.navigate(["/wallet/deposit/"+e._id])},e=>{},()=>{this.apiCalling=!1})}checkTransaction(){}nextPage(){this.offset+=this.size,this._depositService.getDepositOrders(this.offset,this.size).subscribe(e=>{e.length||(this.offset=0)},e=>{this.offset=0})}prevPage(){this.offset-=this.size,this.offset=this.offset<0?0:this.offset,this._depositService.getDepositOrders(this.offset,this.size).subscribe(e=>{e.length||(this.offset=0)},e=>{this.offset=0})}}_.\u0275fac=function(e){return new(e||_)(t.Y36(d),t.Y36(l.F0))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-deposit"]],decls:33,vars:24,consts:[[1,"w-full","h-full","md:p-6"],[1,"w-full","h-full","md:rounded-lg","bg-card","dark:bg-slate-700","p-4"],[1,"w-full","my-2"],[1,"font-semibold"],[1,"w-full","bg-slate-500","rounded-md","drop-shadow-md","p-2","truncate","flex","flex-auto","justify-between","items-center"],[1,"truncate"],["mat-icon-button",""],["svgIcon","heroicons_outline:clipboard-copy"],[1,"flex","flex-auto","items-center","gap-6"],[1,"w-full"],["matInput","","type","text",3,"ngModel","ngModelChange"],["mat-flat-button","",1,"rounded-md","w-full","md:w-fit","bg-lime-500",3,"click"],["svgIcon","heroicons_outline:check-circle"],[1,"w-full","border-b","mt-6"],[1,"md:flex","md:flex-auto","w-full","md:p-4","rounded-lg","gap-6"],[1,"w-full","md:border-r","md:px-6"],[4,"ngIf"],[1,"w-full","h-fit","grid","py-2","md:p-2","border-t","mt-6","md:mt-0","md:border-t-0","grid-cols-1","gap-4"],[1,"flex","flex-auto","justify-end","gap-4"],["mat-icon-button","",3,"click"],["svgIcon","heroicons_outline:chevron-left"],["svgIcon","heroicons_outline:chevron-right"],[4,"ngIf","ngIfElse"],["noResult",""],["class","flex flex-auto items-center justify-between rounded-md bg-card dark:bg-default p-4 gap-6 hover:cursor-pointer transition duration-150 hover:translate-x-2","routerLinkActive","router-link-active",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","router-link-active",1,"flex","flex-auto","items-center","justify-between","rounded-md","bg-card","dark:bg-default","p-4","gap-6","hover:cursor-pointer","transition","duration-150","hover:translate-x-2",3,"routerLink"],[1,"text-sm","text-secondary"],[1,"absolute","icon-size-3","rounded-md","bg-amber-500","animate-ping"],[1,"icon-size-3","rounded-md","bg-amber-500"],[1,"icon-size-3","rounded-md","bg-lime-500"],[1,"icon-size-3","rounded-md","bg-red-500"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4),t.ALo(5,"capitalize"),t.ALo(6,"transloco"),t.qZA(),t.TgZ(7,"div",4),t._UZ(8,"span",5),t.TgZ(9,"button",6),t._UZ(10,"mat-icon",7),t.qZA()()(),t.TgZ(11,"div",8)(12,"mat-form-field",9)(13,"mat-label"),t._uU(14),t.ALo(15,"capitalize"),t.ALo(16,"transloco"),t.qZA(),t.TgZ(17,"mat-hint"),t._uU(18),t.ALo(19,"capitalize"),t.ALo(20,"transloco"),t.qZA(),t.TgZ(21,"input",10),t.NdJ("ngModelChange",function(r){return o.transactionId=r}),t.qZA()(),t.TgZ(22,"button",11),t.NdJ("click",function(){return o.checkTransaction()}),t._UZ(23,"mat-icon",12),t._uU(24),t.ALo(25,"capitalize"),t.ALo(26,"transloco"),t.qZA()(),t._UZ(27,"div",13),t.TgZ(28,"div",14)(29,"div",15),t._UZ(30,"router-outlet"),t.qZA(),t.YNc(31,Y,10,2,"ng-container",16),t.ALo(32,"async"),t.qZA()()()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,6,t.lcZ(6,8,"wallet address"))),t.xp6(10),t.hij(" ",t.lcZ(15,10,t.lcZ(16,12,"transaction identity"))," "),t.xp6(4),t.Oqu(t.lcZ(19,14,t.lcZ(20,16,"transaction hash hint"))),t.xp6(3),t.Q6J("ngModel",o.transactionId),t.xp6(3),t.hij(" ",t.lcZ(25,18,t.lcZ(26,20,"check"))," "),t.xp6(7),t.Q6J("ngIf",t.lcZ(32,22,o.depositOrders$)))},dependencies:[c.sg,c.O5,l.lC,l.rH,l.Od,v.lW,v.RK,x.KE,x.hX,x.bx,b.Hw,D.Nt,y.Fj,y.JJ,y.On,c.Ov,c.uU,I.e,w.Ot]});var j=n(7579),P=n(2722);class G{constructor(e,o){this._document=o;const s=this._textarea=this._document.createElement("textarea"),r=s.style;r.position="fixed",r.top=r.opacity="0",r.left="-999em",s.setAttribute("aria-hidden","true"),s.value=e,s.readOnly=!0,this._document.body.appendChild(s)}copy(){const e=this._textarea;let o=!1;try{if(e){const s=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),o=this._document.execCommand("copy"),s&&s.focus()}}catch{}return o}destroy(){const e=this._textarea;e&&(e.remove(),this._textarea=void 0)}}let R=(()=>{class i{constructor(o){this._document=o}copy(o){const s=this.beginCopy(o),r=s.copy();return s.destroy(),r}beginCopy(o){return new G(o,this._document)}}return i.\u0275fac=function(o){return new(o||i)(t.LFG(c.K0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var B=n(9885);function K(i,e){if(1&i){const o=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(o);const r=t.oxw(2);return t.KtG(r.cancel())}),t._uU(1),t.ALo(2,"capitalize"),t.ALo(3,"transloco"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,t.lcZ(3,3,"cancel"))," "))}function Q(i,e){if(1&i){const o=t.EpF();t.ynx(0),t.TgZ(1,"div",2),t.YNc(2,K,4,5,"button",3),t.qZA(),t.TgZ(3,"div",4)(4,"div",5),t._uU(5),t.ALo(6,"capitalize"),t.ALo(7,"transloco"),t.qZA(),t.TgZ(8,"div",6)(9,"span",7),t._uU(10),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.copyAddress())}),t._UZ(12,"mat-icon",9),t.qZA()()(),t.TgZ(13,"div",10)(14,"div",5),t._uU(15),t.ALo(16,"capitalize"),t.ALo(17,"transloco"),t.qZA(),t.TgZ(18,"div",6)(19,"span",7),t._uU(20),t.qZA(),t.TgZ(21,"button",8),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.copyMessage())}),t._UZ(22,"mat-icon",9),t.qZA()()(),t.TgZ(23,"div",11),t._UZ(24,"qrcode",12),t.qZA(),t.BQk()}if(2&i){const o=t.oxw();t.xp6(2),t.Q6J("ngIf",o.depositOrder.flag==o.DepositOrderStatus.PENDING),t.xp6(3),t.Oqu(t.lcZ(6,8,t.lcZ(7,10,"wallet address"))),t.xp6(5),t.Oqu(o.depositOrder.masterAddress),t.xp6(5),t.Oqu(t.lcZ(16,12,t.lcZ(17,14,"message"))),t.xp6(5),t.Oqu(o.depositOrder._id),t.xp6(4),t.Q6J("qrdata",o.depositOrder.masterAddress)("width",256)("errorCorrectionLevel","M")}}class p{constructor(e,o){this._depositService=e,this._clipboard=o,this.DepositOrderStatus=a,this.apiCalling=!1,this._unsubscribeAll=new j.x}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}ngOnInit(){this.depositOrders$=this._depositService.depositOrders$,this._depositService.depositOrder$.pipe((0,P.R)(this._unsubscribeAll)).subscribe(e=>this.depositOrder=e)}copyAddress(){this._clipboard.copy(this.depositOrder.masterAddress)}copyMessage(){this._clipboard.copy(this.depositOrder._id)}cancel(){this.depositOrder.flag=a.CANCELED,this.apiCalling=!0,this._depositService.cancel(this.depositOrder).subscribe(e=>{this.depositOrder=e},e=>{},()=>{this.apiCalling=!1})}}p.\u0275fac=function(e){return new(e||p)(t.Y36(d),t.Y36(R))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-deposit-order"]],decls:2,vars:1,consts:[[1,"w-full","md:px-6"],[4,"ngIf"],[1,"w-full","mb-2","flex","justify-end"],["mat-flat-button","","class","w-full md:max-w-24 rounded-md bg-red-500",3,"click",4,"ngIf"],[1,"w-full","my-2"],[1,"font-semibold"],[1,"w-full","bg-slate-500","rounded-md","drop-shadow-md","p-2","truncate","flex","flex-auto","justify-between","items-center"],[1,"truncate"],["mat-icon-button","",3,"click"],["svgIcon","heroicons_outline:clipboard-copy"],[1,"w-full","my-4"],[1,"w-full","my-2","flex","flex-auto","justify-center"],[1,"rounded-md",3,"qrdata","width","errorCorrectionLevel"],["mat-flat-button","",1,"w-full","md:max-w-24","rounded-md","bg-red-500",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Q,25,16,"ng-container",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.depositOrder))},dependencies:[c.O5,v.lW,v.RK,b.Hw,B.V,I.e,w.Ot]});class u{constructor(e){this._depositService=e}resolve(e,o){return this._depositService.getDepositOrders()}}u.\u0275fac=function(e){return new(e||u)(t.LFG(d))},u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});class f{constructor(e){this._depositService=e}resolve(e,o){return this._depositService.getDepositOrder(e.paramMap.get("depositOrderId"))}}f.\u0275fac=function(e){return new(e||f)(t.LFG(d))},f.\u0275prov=t.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"});const H=[{path:"deposit",component:_,resolve:{DepositOrdersResolver:u},children:[{path:"",component:p},{path:":depositOrderId",component:p,resolve:{DepositOrderResolver:f}}]}];class g{}g.\u0275fac=function(e){return new(e||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[l.Bz.forChild(H),l.Bz]});var q=n(4466),$=n(811),W=n(8255),X=n(1572),V=n(4385),tt=n(3267),et=n(7314),ot=n(6308),it=n(7155),nt=n(3848),st=n(7775),rt=n(6236);class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[c.ez,g,v.ot,$.vV,x.lN,b.Ps,D.c,W.Tx,V.LD,tt.SJ,ot.JX,it.p0,nt.Nh,et.KP,X.Cq,rt.J,st.fC,q.m]})}}]);