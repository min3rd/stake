"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[903],{3413:(lt,L,s)=>{s.r(L),s.d(L,{WalletModule:()=>v});var x=s(6895),a=s(9299),_=s(7579),O=s(2722),t=s(4650),M=s(1135),y=s(8505),k=s(5698),E=s(3900),d=(()=>{return(i=d||(d={}))[i.PENDING=0]="PENDING",i[i.SUCCESS=1]="SUCCESS",i[i.CANCELED=2]="CANCELED",d;var i})(),j=s(529),F=s(5240);class c{constructor(e,o){this._httpClient=e,this._apiService=o,this._depositOrder=new M.X(null),this._depositOrders=new M.X(null)}get depositOrder$(){return this._depositOrder.asObservable()}get depositOrders$(){return this._depositOrders.asObservable()}getDepositOrders(e=0,o=10,n={time:-1}){return this._httpClient.get(this._apiService.users_wallet_depositOrders(e,o,n)).pipe((0,y.b)(r=>{this._depositOrders.next(r)}))}getDepositOrder(e){return this._httpClient.get(this._apiService.users_wallet_depositOrders_depositOrder(e)).pipe((0,y.b)(o=>{this._depositOrder.next(o)}))}cancel(e){return e.flag=d.CANCELED,this._depositOrders.pipe((0,k.q)(1),(0,E.w)(o=>this._httpClient.patch(this._apiService.users_wallet_depositOrders_depositOrder(e._id),e).pipe((0,y.b)(n=>{let r=o.findIndex(l=>l._id==n._id);r>=0?o[r]=n:o.push(n),o=o.sort((l,T)=>new Date(T.time).getTime()-new Date(l.time).getTime()),this._depositOrders.next(o),this._depositOrder.next(n)}))))}checkTransaction(e){return this._depositOrders.pipe((0,k.q)(1),(0,E.w)(o=>this._httpClient.post(this._apiService.users_wallets_checkTransaction(),{transactionId:e}).pipe((0,y.b)(n=>{let r=o.findIndex(l=>l._id==n._id);r>=0?o[r]=n:o.push(n),o=o.sort((l,T)=>new Date(T.time).getTime()-new Date(l.time).getTime()),this._depositOrders.next(o),this._depositOrder.next(n)}))))}}c.\u0275fac=function(e){return new(e||c)(t.LFG(j.eN),t.LFG(F.s))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});var U=s(900),Z=s(4006),z=s(7495),p=s(4859),C=s(9549),w=s(7392),D=s(4144),A=s(3267),I=s(3317),R=s(758),S=s(5707);const J=["matDrawer"];class u{constructor(e,o,n,r){this._activatedRoute=e,this._changeDetectorRef=o,this._router=n,this._userService=r,this.searchInputControl=new Z.p4,this._unsubscribeAll=new _.x}ngOnInit(){this._userService.user$.pipe((0,O.R)(this._unsubscribeAll)).subscribe(e=>{this.user=e})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}trackByFn(e,o){return o.id||e}}u.\u0275fac=function(e){return new(e||u)(t.Y36(a.gz),t.Y36(t.sBO),t.Y36(a.F0),t.Y36(z.K))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-wallet"]],viewQuery:function(e,o){if(1&e&&t.Gf(J,7),2&e){let n;t.iGM(n=t.CRH())&&(o.matDrawer=n.first)}},decls:39,vars:26,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","md:w-160","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex-auto"],[1,"flex","flex-col","sm:flex-row","md:flex-col","flex-auto","justify-between","p-0","md:p-6","border-b"],[1,"w-full","md:w-fit","md:rounded-md","bg-card","shadow","p-2","items-end"],[1,"text-secondary","text-xl"],[1,"text-3xl","mt-2","mb-6"],[1,"flex","justify-between","gap-6"],["mat-flat-button","","routerLink","./deposit",1,"bg-transparent","p-1"],[1,"flex","items-center","gap-2","hover:cursor-pointer"],[1,"text-lime-500"],["svgIcon","heroicons_outline:arrow-circle-down"],[1,"text-sm"],["mat-flat-button","","routerLink","./withdraw",1,"bg-transparent","p-1"],[1,"flex","items-center","gap-2"],[1,"text-red-500"],[1,"relative","p-6"],[1,"hidden","md:flex","items-center","mt-4","sm:mt-0","md:mt-4"],["subscriptSizing","dynamic",1,"fuse-mat-dense","fuse-mat-rounded","w-full","min-w-50"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"mat-drawer-container",1),t.NdJ("backdropClick",function(){return o.onBackdropClicked()}),t.TgZ(2,"mat-drawer",2,3),t._UZ(4,"router-outlet"),t.qZA(),t.TgZ(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),t._uU(10),t.ALo(11,"capitalize"),t.ALo(12,"transloco"),t.qZA(),t.TgZ(13,"div",9),t._uU(14),t.ALo(15,"currency"),t.qZA(),t.TgZ(16,"div",10)(17,"button",11)(18,"div",12)(19,"span",13),t._UZ(20,"mat-icon",14),t.qZA(),t.TgZ(21,"span",15),t._uU(22),t.ALo(23,"capitalize"),t.ALo(24,"transloco"),t.qZA()()(),t.TgZ(25,"button",16)(26,"div",17)(27,"span",18),t._UZ(28,"mat-icon",14),t.qZA(),t.TgZ(29,"span",15),t._uU(30),t.ALo(31,"capitalize"),t.ALo(32,"transloco"),t.qZA()()()()()(),t.TgZ(33,"div",19)(34,"div",20)(35,"div",5)(36,"mat-form-field",21),t._UZ(37,"mat-icon",22)(38,"input",23),t.qZA()()()()()()()()),2&e&&(t.xp6(2),t.Q6J("mode",o.drawerMode)("opened",!1)("position","end")("disableClose",!0),t.xp6(8),t.hij(" ",t.lcZ(11,12,t.lcZ(12,14,"account cash"))," "),t.xp6(4),t.hij(" ",t.lcZ(15,16,o.user.cash)," "),t.xp6(8),t.hij(" ",t.lcZ(23,18,t.lcZ(24,20,"deposit"))," "),t.xp6(8),t.hij(" ",t.lcZ(31,22,t.lcZ(32,24,"withdraw"))," "),t.xp6(7),t.Q6J("svgIcon","heroicons_solid:search"),t.xp6(1),t.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Search contacts"))},dependencies:[a.lC,a.rH,p.lW,C.KE,C.qo,w.Hw,D.Nt,A.jA,A.kh,A.LW,Z.Fj,Z.JJ,Z.oH,I.e,R.H,S.Ot],encapsulation:2,changeDetection:0});var N=s(9885);function Y(i,e){1&i&&t.GkF(0)}function G(i,e){}const P=function(){return["../"]};class b{constructor(e,o,n,r){this._walletService=e,this._router=o,this._appService=n,this._walletComponent=r,this.apiCalling=!1,this.transactionId="",this.offset=0,this.size=10,this.editMode=!1,this._unsubscribeAll=new _.x}ngOnInit(){this._walletComponent.matDrawer.open(),this.depositOrders$=this._walletService.depositOrders$,this._appService.appConfig$.pipe((0,O.R)(this._unsubscribeAll)).subscribe(e=>{this.appConfig=e})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDrawer(){return this._walletComponent.matDrawer.close()}nextPage(){this.offset+=this.size,this._walletService.getDepositOrders(this.offset,this.size).subscribe(e=>{e.length||(this.offset=0)},e=>{this.offset=0})}prevPage(){this.offset-=this.size,this.offset=this.offset<0?0:this.offset,this._walletService.getDepositOrders(this.offset,this.size).subscribe(e=>{e.length||(this.offset=0)},e=>{this.offset=0})}checkTransaction(){this._walletService.checkTransaction(this.transactionId).subscribe()}}b.\u0275fac=function(e){return new(e||b)(t.Y36(c),t.Y36(a.F0),t.Y36(U.z),t.Y36(u))},b.\u0275cmp=t.Xpm({type:b,selectors:[["app-deposit"]],decls:33,vars:23,consts:[[1,"flex","flex-col","w-full"],[1,"relative","w-full","px-8","sm:px-12","bg-transparent"],[1,"flex","items-center","justify-end","w-full","max-w-3xl","mx-auto","pt-6","pb-2"],["mat-icon-button","",3,"routerLink"],[1,"text-white",3,"svgIcon"],[1,"relative","flex","flex-col","flex-auto","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"pb-4","border-b","justify-center"],[1,"flex","items-center","justify-between","bg-slate-800","shadow-md","rounded-md","p-2"],[1,"truncate"],["mat-icon-button",""],["svgIcon","heroicons_outline:clipboard-copy"],[1,"w-36","h-36","my-2","mx-auto"],[1,"w-36",3,"qrdata","errorCorrectionLevel"],[1,"flex","w-full","my-2","justify-between","items-center","gap-2","pb-2","border-b"],[1,"w-full"],["matInput","","type","text",3,"placeholder"],["mat-flat-button","",1,"bg-lime-500"],["svgIcon","heroicons_outline:check-circle"],[4,"ngIf","ngIfElse"],["viewPanel",""]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t._UZ(4,"mat-icon",4),t.qZA()()(),t.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),t._uU(10),t.qZA(),t.TgZ(11,"button",10),t._UZ(12,"mat-icon",11),t.qZA()(),t.TgZ(13,"div",12),t._UZ(14,"qrcode",13),t.qZA()(),t.TgZ(15,"div",14)(16,"mat-form-field",15)(17,"mat-label"),t._uU(18),t.ALo(19,"capitalize"),t.ALo(20,"transloco"),t.qZA(),t._UZ(21,"input",16),t.ALo(22,"capitalize"),t.ALo(23,"transloco"),t.qZA(),t.TgZ(24,"button",17),t._UZ(25,"mat-icon",18),t.TgZ(26,"span"),t._uU(27),t.ALo(28,"capitalize"),t.ALo(29,"transloco"),t.qZA()()(),t.YNc(30,Y,1,0,"ng-container",19),t.YNc(31,G,0,0,"ng-template",null,20,t.W1O),t.qZA()()()),2&e){const n=t.MAs(32);t.xp6(3),t.Q6J("routerLink",t.DdM(22,P)),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x"),t.xp6(6),t.hij(" ",o.appConfig.MASTER_ADDRESS," "),t.xp6(4),t.Q6J("qrdata",o.appConfig.MASTER_ADDRESS)("errorCorrectionLevel","M"),t.xp6(4),t.hij(" ",t.lcZ(19,10,t.lcZ(20,12,"transaction hash"))," "),t.xp6(3),t.Q6J("placeholder",t.lcZ(22,14,t.lcZ(23,16,"transaction hash hint"))),t.xp6(6),t.Oqu(t.lcZ(28,18,t.lcZ(29,20,"check"))),t.xp6(3),t.Q6J("ngIf",o.editMode)("ngIfElse",n)}},dependencies:[x.O5,a.rH,p.lW,p.RK,C.KE,C.hX,w.Hw,D.Nt,N.V,I.e,S.Ot]});class W{constructor(e,o){this._document=o;const n=this._textarea=this._document.createElement("textarea"),r=n.style;r.position="fixed",r.top=r.opacity="0",r.left="-999em",n.setAttribute("aria-hidden","true"),n.value=e,n.readOnly=!0,this._document.body.appendChild(n)}copy(){const e=this._textarea;let o=!1;try{if(e){const n=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),o=this._document.execCommand("copy"),n&&n.focus()}}catch{}return o}destroy(){const e=this._textarea;e&&(e.remove(),this._textarea=void 0)}}let B=(()=>{class i{constructor(o){this._document=o}copy(o){const n=this.beginCopy(o),r=n.copy();return n.destroy(),r}beginCopy(o){return new W(o,this._document)}}return i.\u0275fac=function(o){return new(o||i)(t.LFG(x.K0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function H(i,e){if(1&i){const o=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(o);const r=t.oxw(2);return t.KtG(r.cancel())}),t._uU(1),t.ALo(2,"capitalize"),t.ALo(3,"transloco"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,t.lcZ(3,3,"cancel"))," "))}function Q(i,e){if(1&i){const o=t.EpF();t.ynx(0),t.TgZ(1,"div",2),t.YNc(2,H,4,5,"button",3),t.qZA(),t.TgZ(3,"div",4)(4,"div",5),t._uU(5),t.ALo(6,"capitalize"),t.ALo(7,"transloco"),t.qZA(),t.TgZ(8,"div",6)(9,"span",7),t._uU(10),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.copyAddress())}),t._UZ(12,"mat-icon",9),t.qZA()()(),t.TgZ(13,"div",10)(14,"div",5),t._uU(15),t.ALo(16,"capitalize"),t.ALo(17,"transloco"),t.qZA(),t.TgZ(18,"div",6)(19,"span",7),t._uU(20),t.qZA(),t.TgZ(21,"button",8),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.copyMessage())}),t._UZ(22,"mat-icon",9),t.qZA()()(),t.TgZ(23,"div",11),t._UZ(24,"qrcode",12),t.qZA(),t.BQk()}if(2&i){const o=t.oxw();t.xp6(2),t.Q6J("ngIf",o.depositOrder.flag==o.DepositOrderStatus.PENDING),t.xp6(3),t.Oqu(t.lcZ(6,8,t.lcZ(7,10,"wallet address"))),t.xp6(5),t.Oqu(o.depositOrder.masterAddress),t.xp6(5),t.Oqu(t.lcZ(16,12,t.lcZ(17,14,"message"))),t.xp6(5),t.Oqu(o.depositOrder._id),t.xp6(4),t.Q6J("qrdata",o.depositOrder.masterAddress)("width",256)("errorCorrectionLevel","M")}}class f{constructor(e,o){this._walletService=e,this._clipboard=o,this.DepositOrderStatus=d,this.apiCalling=!1,this._unsubscribeAll=new _.x}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}ngOnInit(){this.depositOrders$=this._walletService.depositOrders$,this._walletService.depositOrder$.pipe((0,O.R)(this._unsubscribeAll)).subscribe(e=>this.depositOrder=e)}copyAddress(){this._clipboard.copy(this.depositOrder.masterAddress)}copyMessage(){this._clipboard.copy(this.depositOrder._id)}cancel(){this.depositOrder.flag=d.CANCELED,this.apiCalling=!0,this._walletService.cancel(this.depositOrder).subscribe(e=>{this.depositOrder=e},e=>{},()=>{this.apiCalling=!1})}}f.\u0275fac=function(e){return new(e||f)(t.Y36(c),t.Y36(B))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-deposit-order"]],decls:2,vars:1,consts:[[1,"w-full","md:px-6"],[4,"ngIf"],[1,"w-full","mb-2","flex","justify-end"],["mat-flat-button","","class","w-full md:max-w-24 rounded-md bg-red-500",3,"click",4,"ngIf"],[1,"w-full","my-2"],[1,"font-semibold"],[1,"w-full","bg-slate-500","rounded-md","drop-shadow-md","p-2","truncate","flex","flex-auto","justify-between","items-center"],[1,"truncate"],["mat-icon-button","",3,"click"],["svgIcon","heroicons_outline:clipboard-copy"],[1,"w-full","my-4"],[1,"w-full","my-2","flex","flex-auto","justify-center"],[1,"rounded-md",3,"qrdata","width","errorCorrectionLevel"],["mat-flat-button","",1,"w-full","md:max-w-24","rounded-md","bg-red-500",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Q,25,16,"ng-container",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.depositOrder))},dependencies:[x.O5,p.lW,p.RK,w.Hw,N.V,I.e,S.Ot]});class h{canDeactivate(e,o,n,r){let l=r.root;for(;l.firstChild;)l=l.firstChild;return!(r.url.includes("/wallet")&&!l.paramMap.get("id"))||e.closeDrawer().then(()=>!0)}}h.\u0275fac=function(e){return new(e||h)},h.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"});class m{constructor(e){this._walletService=e}resolve(e,o){return this._walletService.getDepositOrders()}}m.\u0275fac=function(e){return new(e||m)(t.LFG(c))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});const K=[{path:"",component:u,resolve:{DepositOrdersResolver:m},children:[{path:"deposit",component:b,canDeactivate:[h],resolve:{},children:[{path:"",component:f},{path:":depositOrderId",component:f,resolve:{}}]}]},{path:"**",redirectTo:"/wallet"}];class g{}g.\u0275fac=function(e){return new(e||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[a.Bz.forChild(K),a.Bz]});var $=s(4466),q=s(811),X=s(8255),V=s(1572),tt=s(4385),et=s(7314),ot=s(6308),it=s(7155),nt=s(3848),st=s(7775),rt=s(6236);class v{}v.\u0275fac=function(e){return new(e||v)},v.\u0275mod=t.oAB({type:v}),v.\u0275inj=t.cJS({imports:[x.ez,g,p.ot,q.vV,C.lN,w.Ps,D.c,X.Tx,tt.LD,A.SJ,ot.JX,it.p0,nt.Nh,et.KP,V.Cq,rt.J,st.fC,$.m]})}}]);